function nmdrLayout(s){var t=nmdr.core.$(s,"nmdrLayout");if(null!=t)return t.padding=0,t.bgColor=null,t.rows=null,t.cols=null,t.comps=null,t.cells=null,t.showGrids=null,t.responsive=null,t.fullscreen=null,t.init=function(s){s=s||{},this.padding=s.hasOwnProperty("padding")?s.padding:0,this.bgColor=s.hasOwnProperty("bgColor")?s.bgColor:"#ddd",this.showGrids=!!s.hasOwnProperty("showGrids")&&s.showGrids,this.rows=s.hasOwnProperty("rows")?s.rows:[{nr:1,sh:"auto"}],this.cols=s.hasOwnProperty("cols")?s.cols:[{nr:1,sw:"auto"}],this.comps=s.hasOwnProperty("comps")?s.comps:[],nmdr.core.utils.updateOnLoadResize(this,function(s){s.layout()}),this.layout()},t.layout=function(){for(var s,t=this.clientWidth-this.padding*(this.cols.length+1),o=this.clientHeight-this.padding*(this.rows.length+1),i=0,h=0,l=0;l<this.rows.length;l++)"auto"==this.rows[l].sh?i++:this.rows[l].sh.endsWith("px")&&(this.rows[l].height=parseInt(this.rows[l].sh),h+=this.rows[l].height);for(l=0;l<this.rows.length;l++)if(this.rows[l].sh.endsWith("%")){var r=parseInt(this.rows[l].sh);this.rows[l].height=Math.max(0,Math.floor((o-h)*r/100)),h+=this.rows[l].height}s=Math.floor((o-h)/i);for(l=0;l<this.rows.length;l++)"auto"==this.rows[l].sh&&(this.rows[l].height=s);for(var n=0,e=0,p=0,a=0;a<this.cols.length;a++)"auto"==this.cols[a].sw?n++:this.cols[a].sw.endsWith("px")&&(this.cols[a].width=parseInt(this.cols[a].sw),e+=this.cols[a].width);for(a=0;a<this.cols.length;a++)if(this.cols[a].sw.endsWith("%")){var d=parseInt(this.cols[a].sw);this.cols[a].width=Math.max(0,Math.floor((t-e)*d/100)),e+=this.cols[a].width}p=Math.floor((t-e)/n);for(a=0;a<this.cols.length;a++)"auto"==this.cols[a].sw&&(this.cols[a].width=p);this.cells={};for(var c=this.padding,l=0;l<this.rows.length;l++){for(var g=this.padding,a=0;a<this.cols.length;a++){for(var w=null,u=0;u<this.comps.length;u++)if(l+1==(n=this.comps[u]).row&&a+1==n.col){w=n;break}this.cells[l+""+a]={row:this.rows[l].nr,col:this.cols[a].nr,left:g,top:c,width:this.cols[a].width,height:this.rows[l].height,comp:w},g+=this.cols[a].width+this.padding}c+=this.rows[l].height+this.padding}this.show()},t.show=function(){var s=[];if(s.push("<div id='"+this.id+"_root' "),s.push("style='position:absolute;left:0px;top:0px;width:100%;height:100%;padding:0;margin:0;"),s.push("display:inline-block;overflow:hidden;box-sizing:border-box;background:"+this.bgColor+";'>"),this.showGrids){s.push("<div id='"+this.id+"_grids' "),s.push("style='position:absolute;left:0px;top:0px;width:100%;height:100%;background:transparent;'>");for(o=0;o<this.rows.length;o++)for(i=0;i<this.cols.length;i++){var t=this.cells[o+""+i];((1<<24)*Math.random()|0).toString(16);s.push("<div id='"+this.id+"cell"+t.row+"-"+t.col+"' "),s.push("style='position:absolute;left:"+t.left+"px;top:"+t.top+"px;width:"+t.width+"px;height:"+t.height+"px;"),s.push("padding:0;margin:0;box-sizing:border-box;border:1px solid #ccc;'></div>")}s.push("</div>")}s.push("<div id='"+this.id+"_comps' "),s.push("style='position:absolute;left:0px;top:0px;width:100%;height:100%;background:transparent;"),s.push("font:14px arial,sans-serif;color:black;'>");for(var o=0;o<this.rows.length;o++)for(var i=0;i<this.cols.length;i++)if(null!=(t=this.cells[o+""+i]).comp){var h=document.getElementById(t.comp.id);if(h){var l=t.width,r=t.height,n=t.left,e=t.top;if(t.comp.colspan&&t.comp.colspan>1&&i+t.comp.colspan<=this.cols.length){l+=(t.comp.colspan-1)*this.padding;for(p=1;p<t.comp.colspan;p++)l+=this.cells[o+""+(i+p)].width}if(t.comp.rowspan&&t.comp.rowspan>1&&o+t.comp.rowspan<=this.rows.length){r+=(t.comp.rowspan-1)*this.padding;for(var p=1;p<t.comp.rowspan;p++)r+=this.cells[o+p+""+i].height}t.comp.halign&&(n="left"==t.comp.halign?n:"right"==t.comp.halign?n+l-h.offsetWidth:"center"==t.comp.halign?n+l/2-h.offsetWidth/2+1:n),t.comp.valign&&(e="top"==t.comp.valign?e:"bottom"==t.comp.valign?e+r-h.offsetHeight:"center"==t.comp.valign?e+r/2-h.offsetHeight/2+1:e),h.style.position="absolute",h.style.left=n+"px",h.style.top=e+"px",h.style.width=l+"px",h.style.height=r+"px",h.style.padding="0",h.style.margin="0",h.style.boxSizing="border-box",s.push(h.outerHTML),h.parentNode.removeChild(h)}}s.push("</div></div>"),this.innerHTML=s.join("")},t}