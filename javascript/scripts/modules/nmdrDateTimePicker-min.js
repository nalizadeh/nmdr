function nmdrDateTimePicker(t){var e=nmdr.core.$(t,"nmdrDateTimePicker");if(null!=e)return e.inputFocusBackground="#FFFCE1",e.backgroundColor="#FFFCE1",e.headerColor="#999",e.headerBackground="#f1f1f1",e.cellColor="#777",e.cellBackground="#f6f6f6",e.hoverColor="#fff",e.hoverBackground="orange",e.imagePath="img/",e.lang="en",e.langData=null,e.showTime=!1,e.showStatusbar=!1,e.date=null,e.days=[],e.selectedDayIndex=-1,e.selectedHourIndex=-1,e.selectedMinutIndex=-1,e.monthIndex=0,e.yearIndex=0,e.hourIndex=-1,e.minutIndex=-1,e.init=function(t){t=t||{},this.setDate(t.hasOwnProperty("date")?t.date:new Date),this.lang=t.hasOwnProperty("lang")?t.lang:this.lang,this.langData="de"==this.lang?this.date.langDATA.de:this.date.langDATA.en,this.showTime=t.hasOwnProperty("showTime")?t.showTime:this.showTime,this.showStatusbar=t.hasOwnProperty("showStatusbar")?t.showStatusbar:this.showStatusbar,this.imagePath=t.hasOwnProperty("imagePath")?t.imagePath:this.imagePath,this.inputFocusBackground=t.hasOwnProperty("inputFocusBackground")?t.inputFocusBackground:this.inputFocusBackground,this.backgroundColor=t.hasOwnProperty("backgroundColor")?t.backgroundColor:this.backgroundColor,this.headerColor=t.hasOwnProperty("headerColor")?t.headerColor:this.headerColor,this.headerBackground=t.hasOwnProperty("headerBackground")?t.headerBackground:this.headerBackground,this.cellColor=t.hasOwnProperty("cellColor")?t.cellColor:this.cellColor,this.cellBackground=t.hasOwnProperty("cellBackground")?t.cellBackground:this.cellBackground,this.hoverColor=t.hasOwnProperty("hoverColor")?t.hoverColor:this.hoverColor,this.hoverBackground=t.hasOwnProperty("hoverBackground")?t.hoverBackground:this.hoverBackground;var e="<div id='"+this.id+"_nmdrDTP_div' style='border:1px solid #ddd;position:relative;width:"+(this.showTime?145:125)+"px; height:23px;vertical-align:middle;'><div style='display:inline-block;position:absolute;left:0px; top:0px;'><input id='"+this.id+"_nmdrDTP_datepicker' type='text' name='nmdrDTP_datepicker' size='"+(this.showTime?18:15)+"' onchange=\"nmdr.core.$('"+this.id+"').parseDate();\"style='height:21px;border:0px;padding:2px 0px 0px 0px;'></div><div style='display:inline-block;position:absolute;left:"+(this.showTime?118:98)+"px; top:0px;'><img id='"+this.id+"_nmdrDTP_button' src='"+this.imagePath+"calendar.gif' style='cursor:pointer;' onclick=\"nmdr.core.$('"+this.id+"').openDateTime();\"></div></div><div id='"+this.id+"_nmdrDTP_overlay' style='position:absolute;z-index:2;display:none;'></div>";this.innerHTML=e,this.makeDateTime()},e.makeDateTime=function(){var t=this.date.getDate(),e=this.date.getMonth(),i=this.date.getFullYear(),s=(this.date.getHours(),this.date.getMinutes(),this.langData.months[this.date.getMonth()]),n=this.langData.weekdays[0==this.date.getDay()?6:this.date.getDay()-1],o=this.date.asString(".",this.showTime),a="en"==this.lang?n+" "+t+"th of "+s+", "+i:n+" "+t+" "+s+" "+i,d="#"+this.id+"_nmdrDTP_overlay",l=this.showTime?347:245,r=this.showStatusbar?240:220,h="0 4px 8px 0 rgba(0,0,0,0.22),0 6px 20px 0 rgba(0,0,0,0.19);",c=[];this.monthIndex=e>5?5:e,this.yearIndex=i,c.push("<style type='text/css'>"),c.push("#"+this.id+"_nmdrDTP_datepicker:focus {background-color:"+this.inputFocusBackground+";}"),c.push(d+" .container {background-color:"+this.backgroundColor+";font-family:arial;line-height:1.42857;}"),c.push(d+" .daystable,.hourstable,.minutstable {border:1px solid #ddd;font-size:12px;}"),c.push(d+" .daystable td {width:26px;height:24px;cursor:default;}"),c.push(d+" .daystable tr:not(:last-child) td {border-bottom: 1px solid #ddd;}"),c.push(d+" .daystable td:not(:last-child) {border-right: 1px solid #ddd;}"),c.push(d+" .hourstable tr:not(:last-child) td {border-bottom: 1px solid #ddd;}"),c.push(d+" .hourstable td {height:24px;cursor:default;}"),c.push(d+" .minutstable tr:not(:last-child) td {border-bottom: 1px solid #ddd;}"),c.push(d+" .minutstable td {height:24px;cursor:default;}"),c.push(d+" .header_cell {text-align:center;color:"+this.headerColor+";background:"+this.headerBackground+";font-weight:normal;cursor:default;}"),c.push(d+" .cell {text-align:right;padding-right:5px;color:"+this.cellColor+";background:"+this.cellBackground+";font-weight:normal;}"),c.push(d+" .hourcell, .minutcell {text-align:center;color:"+this.cellColor+";background:"+this.cellBackground+";font-weight:normal;cursor:pointer;}"),c.push(d+" .cell:hover, .hourcell:hover, .minutcell:hover {color:"+this.hoverColor+" !important;background:"+this.hoverBackground+";}"),c.push(d+" .hourcell:hover {color:"+this.hoverColor+";background:"+this.hoverBackground+";}"),c.push(d+" .cell_ac {cursor:pointer;}"),c.push(d+" .cell_pa {opacity: 0.3;}"),c.push(d+" .cell_ss {color:#854;}"),c.push(d+" .cell_to {color:#33AAFF !important;}"),c.push(d+" .cell_ar {text-align:center;background:"+this.headerBackground+";opacity: 0.4;}"),c.push(d+" .cell_se, .hourcell_se, .minutcell_se {background:#33AAFF;color:white !important;font-weight:bold;}"),c.push(d+" .hourcell_se {background:#33AAFF;color:white;font-weight:bold;}"),c.push(d+" .img {cursor:pointer; opacity: 0.5;}"),c.push(d+" .img:hover {opacity: 1;}"),c.push(d+" .mtitle, .ytitle {font-family:Arial;font-size:13px;font-weight:normal;cursor:pointer;}"),c.push(d+" .mtitle:hover, .ytitle:hover {text-decoration: underline;}"),c.push(d+" .tdisp {font-family:verdana; font-size:12px;font-weight:normal;}"),c.push(d+" .container, .monthsdiv, .yearsdiv {border-radius: 4px; -moz-box-shadow:"+h+"-webkit-box-shadow:"+h+"box-shadow:"+h+"}"),c.push(d+" .monthstable, .yearstable {border: 1px solid #ddd;}"),c.push(d+" .monthstable td {width:46px;height:24px;cursor:pointer;text-align:left;font-size:12px;font-weight:normal;padding-left:5px;}"),c.push(d+" .yearstable td {width:26px;height:24px;cursor:pointer;text-align:center;font-size:12px;font-weight:normal;}"),c.push(d+" .monthcell:hover, .yearcell:hover {background:#33AAFF;color:white;}"),c.push("</style>"),c.push("<div id='"+this.id+"_nmdrDTP_container' class='container' style='display:inline-block;position:relative; width:"+l+"px; height:"+r+"px; border:thin lightgray solid;'>"),c.push("<div style='display:inline-block;position:absolute;left:14px; top:8px; width:20px; height:20px;'><img class='img' src='"+this.imagePath+"ghome.gif' onclick=\"nmdr.core.$('"+this.id+"').goToday();\"></div>"),c.push("<div style='display:inline-block;position:absolute;left:38px; top:9px; width:20px; height:20px;'><img class='img' src='"+this.imagePath+"gleft.png' onclick=\"nmdr.core.$('"+this.id+"').goPrevMonth();\"></div>"),c.push("<div style='display:inline-block;position:absolute;left:62px; top:9px; width:20px; height:20px;'><img class='img' src='"+this.imagePath+"gright.png' onclick=\"nmdr.core.$('"+this.id+"').goNextMonth();\"></div>"),c.push("<div style='display:inline-block;position:absolute;left:88px; top:6px; width:140px; height:20px;text-align:left;'>"),c.push("<span id='"+this.id+"_nmdrDTP_mtitle' class='mtitle' onclick=\"nmdr.core.$('"+this.id+"').openMonthPopup();\">"+s+"</span><span>&nbsp;&nbsp;</span>"),c.push("<span id='"+this.id+"_nmdrDTP_ytitle' class='ytitle' onclick=\"nmdr.core.$('"+this.id+"').openYearPopup();\">"+i+"</span></div>"),c.push("<div style='display:inline;position:absolute;left:10px; top:35px; width:225px; height:176px;'>"),c.push(this.makeDays()+"</div>"+(this.showTime?this.makeHoursAndMinuts():"")+(this.showStatusbar?"<div class='tdisp' style='display:inline-block;position:absolute;left:10px; top:215px; width:240px; height:20px;padding-top:3px;'><span>"+a+"</span></div>":"")),c.push("<div id='"+this.id+"_nmdrDTP_monthsdiv' class='monthsdiv' style='position:absolute;left:0px; top:0px; width:75px; height:170px;display:none;z-index:998;overflow:hidden;background:white;'>"),c.push(this.makeMonthsList()+"</div><div id='"+this.id+"_nmdrDTP_yearsdiv' class='yearsdiv' style='position:absolute;left:0px; top:0px; width:50px; height:170px;display:none;z-index:999;overflow:hidden;background:white;'>"+this.makeYearsList()+"</div></div>"),document.getElementById(this.id+"_nmdrDTP_overlay").innerHTML=c.join(""),document.getElementById(this.id+"_nmdrDTP_datepicker").value=o,this.showTime&&(nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrDTP_timesdiv",this.scrollHours),nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrDTP_minutsdiv",this.scrollMinuts)),nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrDTP_monthsdiv",this.scrollMonths),nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrDTP_yearsdiv",this.scrollYears)},e.makeDays=function(){var t,e,i,s,n,o=this.date.getDate(),a=this.date.getMonth(),d=this.date.getFullYear(),l=(new Date(d,a,1),new Date(d,a,0),new Date),r=[],h=[],c=[],u=!1,p=!1,m=0,g=0,y=0,x=0,D=[],v=[];for(i=new Date(d,a,1);i.getMonth()===a;)r.push(i.toDateString()),i.setDate(i.getDate()+1);for(t=0==a?11:a-1,e=0==a?d-1:d,i=new Date(e,t,1);i.getMonth()==t;)h.push(i.toDateString()),i.setDate(i.getDate()+1);for(t=11==a?0:a+1,e=11==a?d+1:d,i=new Date(e,t,1);i.getMonth()==t;)c.push(i.toDateString()),i.setDate(i.getDate()+1);n=0==(s=new Date(r[0])).getDay()?6:s.getDay()-1;for(_=0;_<7&&this.langData.weekdays[_]!=this.langData.weekdays[n];_++)x++;v.push("<tr>");for(var f=0;f<this.langData.weekdays.length;f++)v.push("<td class='header_cell'><span>"),v.push(this.langData.weekdays[f].substring(0,"en"==this.lang?3:2)+"</span></td>");v.push("</tr>"),this.days=[];for(var b=0;b<6;b++){D.push("<tr>");for(var _=0;_<7;_++){var k=!1;n=0==(i=new Date(r[g])).getDay()?6:i.getDay()-1,u||this.langData.weekdays[n]!=this.langData.weekdays[_]||(u=!0),g==r.length&&(p=!0),u&&!p?(g++,k=!0,-1===this.selectedDayIndex&&o===i.getDate()&&(this.selectedDayIndex=m)):u?p&&(i=new Date(c[y++])):i=new Date(h[h.length-x+_]),this.days.push(i);var w=this.selectedDayIndex==m,T=i.toDateString()==l.toDateString();D.push("<td class='cell"+(k?" cell_ac":" cell_pa")+(T?" cell_to":"")+(w?" cell_se":"")+(5==n||6==n?" cell_ss":"")+"' id='"+this.id+"_nmdrDTP_cell_"+m+"' "+(k?"onclick=\"nmdr.core.$('"+this.id+"').selectDay("+m+')"':"")+"><span>"+i.getDate()+"</span></td>"),m++}D.push("</tr>")}return"<table class='daystable' width='100%' height='100%' cellpadding=0 cellspacing=0>"+v.join("")+D.join("")+"</table>"},e.makeHoursAndMinuts=function(){-1===this.hourIndex&&(-1!==this.selectedHourIndex?this.hourIndex=23-this.selectedHourIndex<7?17:this.selectedHourIndex:this.hourIndex=0),-1===this.minutIndex&&(-1!==this.selectedMinutIndex?this.minutIndex=59-this.selectedMinutIndex<7?53:this.selectedMinutIndex:this.minutIndex=0);for(var t="<td class='cell_ar' style='width:10'><img class='img' src='"+this.imagePath+"gup.gif' onmouseover=\"nmdr.core.$('"+this.id+'\').scrollHoursTimer(1);" onmouseout="nmdr.core.utils.stopTimer()"></td>',e="<td class='cell_ar' style='width:10'><img class='img' src='"+this.imagePath+"gdown.gif' onmouseover=\"nmdr.core.$('"+this.id+'\').scrollHoursTimer(-1);" onmouseout="nmdr.core.utils.stopTimer()"></td>',i="<td class='cell_ar' style='width:10'><img class='img' src='"+this.imagePath+"gup.gif' onmouseover=\"nmdr.core.$('"+this.id+'\').scrollMinutsTimer(1);" onmouseout="nmdr.core.utils.stopTimer()"></td>',s="<td class='cell_ar' style='width:10'><img class='img' src='"+this.imagePath+"gdown.gif' onmouseover=\"nmdr.core.$('"+this.id+'\').scrollMinutsTimer(-1);" onmouseout="nmdr.core.utils.stopTimer()"></td>',n=[],o=[],a=this.hourIndex;a<this.hourIndex+7;a++){var d=a<10?"0"+a:""+a,l=a==this.hourIndex?t:a==this.hourIndex+6?e:'<td class="cell_ar"></td>';n.push("<tr><td class='hourcell"+(a==this.selectedHourIndex?" hourcell_se'":"'")+" id='"+this.id+"_nmdrDTP_hourcell_"+a+"' onclick="+this.id+".selectHour("+a+")><span>"+d+":00</span></td>"+l+"</tr>")}for(a=this.minutIndex;a<this.minutIndex+7;a++){var d=a<10?"0"+a:""+a,l=a==this.minutIndex?i:a==this.minutIndex+6?s:"<td class='cell_ar'></td>";o.push("<tr><td class='minutcell"+(a==this.selectedMinutIndex?" minutcell_se'":"'")+" id='"+this.id+"_nmdrDTP_minutcell_"+a+"' onclick="+this.id+".selectMinut("+a+")><span>"+d+"</span></td>"+l+"</tr>")}return"<div id='"+this.id+"_nmdrDTP_timesdiv' class='timesdiv' style='display:inline-block;overflow:hidden;position:absolute; left:240px; top:35px; width:61px;'><table class='hourstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+n.join("")+"</table></div><div id='"+this.id+"_nmdrDTP_minutsdiv' class='minutsdiv' style='display:inline-block;overflow:hidden;position:absolute; left:304px; top:35px; width:34px;'><table class='minutstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+o.join("")+"</table></div>"},e.openDateTime=function(){var t=this,e=document.getElementById(this.id+"_nmdrDTP_overlay"),i=document.getElementById(this.id+"_nmdrDTP_button");nmdr.core.popup.open(e,i,null,function(e){t.closeDateTime(t,e)}),e.style.display="block",nmdr.core.animate.fadeIn(null,e,null,!0)},e.closeDateTime=function(t,e){null==t&&(t=this),t.closeMonthPopup(),t.closeYearPopup();var i=document.getElementById(t.id+"_nmdrDTP_overlay");nmdr.core.animate.fadeOut(null,i,null,!0,function(){i.style.display="none"}),nmdr.core.popup.close(),e&&e()},e.getDate=function(){return this.date},e.showHourPicker=function(t){this.showTime=t},e.setDate=function(t){this.date=t,this.selectedDayIndex=-1,this.hourIndex=-1,this.minutIndex=-1,this.selectedHourIndex=t.getHours(),this.selectedMinutIndex=t.getMinutes()},e.selectDay=function(t){var e=this.days[t];this.setDate(new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.makeDateTime(),this.closeDateTime()},e.selectMonth=function(t){this.setDate(new Date(this.date.getFullYear(),t,this.date.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.makeDateTime()},e.selectYear=function(t){this.setDate(new Date(t,this.date.getMonth(),this.date.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.makeDateTime()},e.goPrevMonth=function(){this.setDate(this.date.prevMonth()),this.makeDateTime()},e.goNextMonth=function(){this.setDate(this.date.nextMonth()),this.makeDateTime()},e.goToday=function(){this.setDate(new Date),this.makeDateTime()},e.selectHour=function(t){this.selectedHourIndex=t,this.date.setHours(t),this.makeDateTime()},e.selectMinut=function(t){this.selectedMinutIndex=t,this.date.setMinutes(t),this.makeDateTime()},e.parseDate=function(){var t=document.getElementById(this.id+"_nmdrDTP_datepicker");if(t){var e=t.value;if(!this.showTime){var i=new Date;e+=" "+i.getHours()+":"+i.getMinutes()}var s=e.split(" ");if(2===s.length){var n=s[0].split("."),o=s[1].split(":");if(3===n.length&&2===o.length){var a=parseInt(n[2]),d=parseInt(n[1]),l=parseInt(n[0]),r=parseInt(o[0]),h=parseInt(o[1]);a>=1995&&a<=2050&&d>=1&&d<=12&&l>=1&&l<=31&&r>=0&&r<=23&&h>=0&&h<=59?this.setDate(new Date(a,d-1,l,r,h)):this.setDate(new Date),this.makeDateTime()}}}},e.scrollHours=function(t,e){var i=null==t?this:t;e<=-1?i.hourIndex<17&&i.hourIndex++:i.hourIndex>0&&i.hourIndex--,i.makeDateTime()},e.scrollHoursTimer=function(t){var e=this;nmdr.core.utils.startTimer(function(){e.scrollHours(e,t)},100)},e.scrollMinuts=function(t,e){var i=null==t?this:t;e<=-1?i.minutIndex<53&&i.minutIndex++:i.minutIndex>0&&i.minutIndex--,i.makeDateTime()},e.scrollMinutsTimer=function(t){var e=this;nmdr.core.utils.startTimer(function(){e.scrollMinuts(e,t)},100)},e.makeMonthsList=function(){for(var t=[],e=this.monthIndex;e<this.langData.months.length;e++)t.push("<tr><td class='monthcell' id='"+this.id+"_nmdrDTP_monthcell_"+e+"' onclick=\"nmdr.core.$('"+this.id+"').selectMonth("+e+');"><span>'+this.langData.months[e]+"</span></td></tr>");return"<div id='"+this.id+"_nmdrDTP_mtdiv'><table class='monthstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+t.join("")+"</table></div>"},e.openMonthPopup=function(){var t=document.getElementById(this.id+"_nmdrDTP_mtitle"),e=document.getElementById(this.id+"_nmdrDTP_monthsdiv"),i=document.getElementById(this.id+"_nmdrDTP_yearsdiv"),s=document.getElementById(this.id+"_nmdrDTP_container");i.style.display="none",e.style.position="absolute",e.style.left=t.absLeft-s.absLeft+"px",e.style.top=t.absTop-s.absTop+16+"px",e.style.display="block"},e.closeMonthPopup=function(){document.getElementById(this.id+"_nmdrDTP_monthsdiv").style.display="none"},e.scrollMonths=function(t,e){e<=-120?t.monthIndex<5&&t.monthIndex++:t.monthIndex>0&&t.monthIndex--,document.getElementById(t.id+"_nmdrDTP_mtdiv").innerHTML=t.makeMonthsList()},e.makeYearsList=function(){for(var t=[],e=this.yearIndex;e<this.yearIndex+7;e++)t.push("<tr><td class='yearcell' id='"+this.id+"_nmdrDTP_yearcell_"+e+"' onclick=\"nmdr.core.$('"+this.id+"').selectYear("+e+');"><span>'+e+"</span></td></tr>");return"<div id='"+this.id+"_nmdrDTP_ytdiv'><table class='yearstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+t.join("")+"</table></div>"},e.openYearPopup=function(){var t=document.getElementById(this.id+"_nmdrDTP_ytitle"),e=document.getElementById(this.id+"_nmdrDTP_monthsdiv"),i=document.getElementById(this.id+"_nmdrDTP_yearsdiv"),s=document.getElementById(this.id+"_nmdrDTP_container");e.style.display="none",i.style.position="absolute",i.style.left=t.absLeft-s.absLeft+"px",i.style.top=t.absTop-s.absTop+16+"px",i.style.display="block"},e.closeYearPopup=function(){document.getElementById(this.id+"_nmdrDTP_yearsdiv").style.display="none"},e.scrollYears=function(t,e){e<=-120?t.yearIndex<2050&&t.yearIndex++:t.yearIndex>1995&&t.yearIndex--,document.getElementById(t.id+"_nmdrDTP_ytdiv").innerHTML=t.makeYearsList()},e}