function CALDATA(e){var t=new Date,i={months:t.langDATA.en.months,weekdays:t.langDATA.en.weekdays,daysShort:t.langDATA.en.daysShort,weekname:t.langDATA.en.weekname,views:["Default view...","Tabular view...","Year view..."],commands:["Open item...","Edit item...","Delete item..."]},s={months:t.langDATA.de.months,weekdays:t.langDATA.de.weekdays,daysShort:t.langDATA.de.daysShort,weekname:t.langDATA.de.weekname,views:["Standardansicht...","Tabellenansicht...","Jahresansicht..."],commands:["Öffnen...","Bearbeiten...","Löschen..."]},a={months:t.langDATA.fr.months,weekdays:t.langDATA.fr.weekdays,daysShort:t.langDATA.fr.daysShort,weekname:t.langDATA.fr.weekname,views:["Mode d'affichage standard...","Vue de table...","année..."],commands:["Ouvert...","Éditer...","Effacer..."]};switch(e){case"en":return i;case"de":return s;case"fr":return a}return i}function nmdrCalendar(e){var t=nmdr.core.$(e,"nmdrCalendar");if(null!=t)return t.defaultView=1,t.tabularView=2,t.yearView=3,t.view=t.defaultView,t.date=null,t.imagePath="",t.lang="en",t.langData=null,t.cellWidth=0,t.cellHeight=0,t.headerFontSize=15,t.fontSize=12,t.orgHeaderFontSize=t.headerFontSize,t.orgFontSize=t.fontSize,t.backgroundColor="#fff",t.headerColor="#000",t.headerBackground="#fff",t.cellColor="#000",t.cellBackground="#fff",t.hoverColor="orange",t.hoverBackground="#D9EFFF",t.todayBackground="#0072C6",t.notCurrentMonthBG="#F2F2F2",t.saturdaySundayBG="#F5FFFF",t.saturdaySundayFC="#854",t.cellSelectionBG="#FFFFD7",t.cellSelectionFC="#000",t.wnCellBackground="#FFF4CC",t.userCellBackground="#EBF1DE",t.yvHeaderBackground="#fff",t.yvCellBackground="#fff",t.yvMonthTitleBackground="#ddd",t.enabled=!0,t.showOptions=!0,t.showClock=!0,t.showWN=!0,t.showFooter=!0,t.tabuserLines=10,t.moDDListWidth=75,t.yeDDListWidth=50,t.days=[],t.dayIndex=-1,t.monthIndex=0,t.yearIndex=0,t.commands=[],t.init=function(e){e=e||{},this.setDate(e.hasOwnProperty("date")?""==e.date?new Date:e.date:new Date),this.view=e.hasOwnProperty("view")?e.view:this.view,this.lang=e.hasOwnProperty("lang")?e.lang:"en",this.langData=CALDATA(this.lang),this.imagePath=e.hasOwnProperty("imagePath")?e.imagePath:"img/",this.fontSize=e.hasOwnProperty("fontSize")?e.fontSize:this.fontSize,this.enabled=e.hasOwnProperty("enabled")?e.enabled:this.enabled,this.showOptions=e.hasOwnProperty("showOptions")?e.showOptions:this.showOptions,this.showClock=e.hasOwnProperty("showClock")?e.showClock:this.showClock,this.showWN=e.hasOwnProperty("showWn")?e.showWn:this.showWN,this.tabuserLines=e.hasOwnProperty("userLines")?e.userLines:this.tabuserLines,this.commands=this.prepareCommands(),this.dateChanged(),nmdr.core.utils.updateOnLoadResize(this,function(e){e.closeCellMenu(),e.closeViewMenu(),e.makeCalendar()})},t.makeCalendar=function(){var e=[],t="#"+this.id,i=this.date.getDate(),s=this.date.getMonth(),a=this.date.getFullYear(),n=this.langData.months[this.date.getMonth()],l=this.langData.weekdays[0==this.date.getDay()?6:this.date.getDay()-1]+" "+i+" "+n+" "+a,d=this.showFooter?22:0,o=this.view==this.defaultView?40:65,h=this.showWN?25:0,r=nmdr.core.utils.getInnerDim(this.parentElement);this.headerFontSize=this.orgHeaderFontSize,this.fontSize=this.orgFontSize,this.cellWidth=(r.width-h-20)/7,this.cellHeight=(r.height-o-34-d)/6;var c=this.view==this.defaultView?7*this.cellWidth+h+20:this.view==this.tabularView?940:832,p=this.view==this.defaultView?6*this.cellHeight+o+34+d:this.view==this.tabularView?18*(this.tabuserLines+4)+o+d+4:576+o+d+32;c<280&&(this.headerFontSize=12,this.fontSize=10,c<250&&(this.headerFontSize=10,this.fontSize=9,o=this.view==this.defaultView?32:65),c<180&&(this.showOptions=!1)),this.monthIndex=s>5?5:s,this.yearIndex=a,e.push("<style type='text/css'>"),e.push(t+" * {box-sizing:border-box;}"),e.push(t+" .calcontainer {padding:0;margin:0;white-space:nowrap;background:"+this.backgroundColor+";font-family:'Segoe UI','Segoe',Tahoma,Helvetica,Arial,sans-serif; outline:1px solid #ccc;}"),e.push(t+' .loader {position:absolute; display:none; height:100%; width:100%; cursor:wait; background:#fff url("'+this.imagePath+'loading.gif") no-repeat center center;opacity:0.75;z-index:100;}'),e.push(t+" .header {color:#000;background:#fff;text-align:left;font-size:"+(this.fontSize-1)+"px;font-weight:normal;}"),e.push(t+" .footer {color:#aaa;background:#fff;text-align:right;font-size:"+(this.fontSize-1)+"px;font-weight:normal;}"),e.push(t+" .daysdiv {font-size:"+this.fontSize+"px;font-weight:normal;}"),e.push(t+" .daysdiv table {table-layout: fixed; border-collapse: collapse;}"),e.push(t+" .hcells {cursor:default;text-align:left;vertical-align:bottom;cursor:default;height:34px;line-height:50px;background:"+this.headerBackground+";color:"+this.headerColor+";border-bottom:1px solid #ccc; font-weight:normal;}"),e.push(t+" .hcell {width:"+this.cellWidth+"px;height:100%;border-right:1px solid transparent;}"),e.push(t+" .hcellspan {padding-left:4px;}"),e.push(t+" .cell {width:"+this.cellWidth+"px;height:"+this.cellHeight+"px;cursor:default;border-bottom:1px solid #ddd; border-right:1px solid #ddd;text-align:left;vertical-align:top;color:"+this.cellColor+";background:"+this.cellBackground+";font-weight:normal; }"),e.push(t+" .hcellWN {width:"+h+"px;height:100%;padding-left:4px;}"),e.push(t+" .cellWN {width:"+h+"px;height:"+this.cellHeight+"px;border-left: 1px solid #ddd;border-bottom:1px solid #ddd;padding-left:4px;background:"+this.wnCellBackground+";opacity: 0.5;}"),e.push(t+" .hcell1 {width:26px;height:38px;text-align:left;vertical-align:bottom;padding-bottom:3px;}"),e.push(t+" .hcell1 {border-bottom:1px solid #ddd;}"),e.push(t+" .hcell1:not(:last-child) {border-right:1px solid #ddd;}"),e.push(t+" .hcell1_span {display:block;transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-webkit-transform:rotate(-90deg); }"),e.push(t+" .hcell1_user {width:80px;}"),e.push(t+" .hcell2 {text-align:center;background:"+this.wnCellBackground+";height:18px;}"),e.push(t+" .hcell2 {border-bottom:1px solid #ddd;}"),e.push(t+" .hcell2:not(:last-child) {border-right:1px solid #ddd;}"),e.push(t+" .hcell2_user {}"),e.push(t+" .hcell3 {width:26px;height:18px;text-align:center;}"),e.push(t+" .hcell3 {border-bottom:1px solid #ddd;}"),e.push(t+" .hcell3:not(:last-child) {border-right:1px solid #ddd;}"),e.push(t+" .hcell3_user {border-bottom:1px solid #ddd;}"),e.push(t+" .hcell4 {width:26px;height:18px;}"),e.push(t+" .hcell4 {border-bottom:1px solid #ddd;}"),e.push(t+" .hcell4:not(:last-child) {border-right:1px solid #ddd;}"),e.push(t+" .hcell4_user {background:"+this.userCellBackground+";border-bottom:1px solid #ddd; }"),e.push(t+" .hcell_fr {border-left:1px solid #ddd;}"),e.push(t+" .yvContainer {background:#fff;border:1px solid "+this.yvMonthTitleBackground+";}"),e.push(t+" .yvMontitle {background:"+this.yvMonthTitleBackground+";text-align:center;width:26;height:24px;}"),e.push(t+" .yvHcell {background:"+this.yvHeaderBackground+";text-align:center;width:26;height:24px;}"),e.push(t+" .yvCell {background:"+this.yvCellBackground+";text-align:center;width:26;height:24px;}"),e.push(t+" .yvCellho {background:#9FDDEC !important;}"),e.push(t+" .hcell_fi {border-left: 1px solid transparent;}"),e.push(t+" .cell_fi {border-left: 1px solid #ddd;}"),e.push(t+" .cell_ac {cursor:pointer;}"),e.push(t+" .cell_ac:hover {background:"+this.hoverBackground+";color:"+this.hoverColor+" !important;cursor:pointer;}"),e.push(t+" .cell_pa {opacity: 0.3;background:"+this.notCurrentMonthBG+"}"),e.push(t+" .cell_ss {color:"+this.saturdaySundayFC+";background:"+this.saturdaySundayBG+"}"),e.push(t+" .cell_to {background:"+this.todayBackground+" !important;color:#fff !important;"+(this.fontSize+2)+"px;font-weight:bold;}"),e.push(t+" .cell_se {background:"+this.cellSelectionBG+";color:"+this.cellSelectionFC+" !important;font-weight:bold;}"),e.push(t+" .cell_ar {text-align:center;background:"+this.headerBackground+";opacity: 0.4;}"),e.push(t+" .img {cursor:pointer; opacity: 1;}"),e.push(t+" .img:hover {opacity: 0.7;}"),e.push(t+" .clockdiv {font-family:Consolas,monaco,monospace;font-size:12px;font-weight:normal;}"),e.push(t+" .headtable {font-size:"+this.headerFontSize+"px;font-weight:normal;}"),e.push(t+" .headtable td {padding:2px;}"),e.push(t+" .mtitle,.ytitle {cursor:pointer;}"),e.push(t+" .mtitle:hover,.ytitle:hover,.dayspan:hover {text-decoration:underline;}"),e.push(t+" .daydiv {width:100%;height:18px;padding:0;}"),e.push(t+" .userdiv {width:100%;height:"+(this.cellHeight-19)+"px;padding:0; font-size:"+this.fontSize+"px;font-weight:normal;}"),e.push(t+" .dayspan, .dayspan_pa, .dayspan_ho {padding-left:4px;}"),e.push(t+" .dayspan:hover, .dayspan_ho:hover {font-weight:bold;}"),e.push(t+" .dayspan_ho {color:#a1d490 !important; font-size:"+(this.fontSize+3)+"px;font-weight:bold;}"),e.push(t+" .monthsdiv, .yearsdiv {overflow:hidden;background:white;box-shadow:3px 3px 3px #eee;transition:all 0.3s ease-in-out; -webkit-transition:all 0.3s ease-in-out; -moz-transition:all 0.3s ease-in-out; -o-transition:all 0.3s ease-in-out;}"),e.push(t+" .monthstable, .yearstable {border:1px solid #ccc;}"),e.push(t+" .monthstable td {width:46px;height:24px;cursor:pointer;text-align:left;font-size:12px;font-weight:normal;padding-left:5px;}"),e.push(t+" .yearstable td {width:26px;height:24px;cursor:pointer;text-align:center;font-size:12px;font-weight:normal;}"),e.push(t+" .monthcell:hover, .yearcell:hover {background:#33AAFF;color:white;}"),e.push("</style>"),e.push("<div class='calcontainer' id='"+this.id+"_nmdrCAL_container' style='display:block;position:relative;left:0px;top:0px;width:"+c+"px;height:"+p+"px;'><div class='loader'></div><div class='header' style='display:block;position:absolute;left:10px; top:5px; width:"+(c-20)+"px; height:"+o+"px;'><table class='headtable' cellpadding='2' cellspacing='0' border='0'><tr><td style='padding-top:4px'><img class='img' src='"+this.imagePath+"ghome.gif' onclick=\"nmdr.core.$('"+this.id+"').goToday();\"></td><td style='padding-top:6px'><img class='img' src='"+this.imagePath+"calprev.png' onclick=\"nmdr.core.$('"+this.id+"').goPrevMonth();\"></td><td style='padding-top:6px'><img class='img' src='"+this.imagePath+"calnext.png' onclick=\"nmdr.core.$('"+this.id+"').goNextMonth();\"></td><td style='padding-left:5px'><span class='mtitle' id='"+this.id+"_nmdrCAL_mtitle' onclick=\"nmdr.core.$('"+this.id+"').openMonthPopup();\">"+n+"</span></td><td style='padding-left:3px'><span class='ytitle' id='"+this.id+"_nmdrCAL_ytitle' onclick=\"nmdr.core.$('"+this.id+"').openYearPopup();\">"+a+"</span></td>"+(this.showOptions?"<td style='padding:8px 0 0 8px'><img class='img' src='"+this.imagePath+"calmenu.png' onclick=\"nmdr.core.$('"+this.id+"').openViewMenu(this);\"></td>":"")+"</tr></table></div><div class='daysdiv' id='"+this.id+"_nmdrCAL_daysdiv' style='display:block;position:absolute;left:10px;top:"+o+"px;width:"+(c-20)+"px;height:"+(p-75)+"px;'></div>"+(this.showFooter?"<div class='footer' style='display:block;position:absolute;left:10px; top:"+(p-d)+"px; width:"+(c-20)+"px; height:"+d+"px;line-height:"+(d+3)+"px;'><span>"+l+"</span>"+(this.showClock?"&nbsp;&nbsp;&nbsp;<span id='"+this.id+"_nmdrCAL_clock'></span></div>":"</div>"):"")+"<div class='monthsdiv' id='"+this.id+"_nmdrCAL_monthsdiv' style='position:absolute;left:0px; top:0px; width:0px; height:170px;z-index:998;'>"+this.makeMonthsList()+"</div><div class='yearsdiv' id='"+this.id+"_nmdrCAL_yearsdiv' style='position:absolute;left:0px; top:0px; width:0px; height:170px;z-index:999;'>"+this.makeYearsList()+"</div></div>"),this.innerHTML=e.join(""),nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrCAL_monthsdiv",this.scrollMonths),nmdr.core.utils.addMouseWheelEvent(this,this.id+"_nmdrCAL_yearsdiv",this.scrollYears),this.makeDays(),this.showClock&&nmdrDigitalClock(this.id+"_nmdrCAL_clock").start()},t.makeDays=function(){this.days=[];var e=this.langData.months[this.date.getMonth()],t=this.date.getFullYear(),i=this.view==this.defaultView?this.makeDefaultView():this.view==this.tabularView?this.makeTabularView():this.makeYearView();document.getElementById(this.id+"_nmdrCAL_mtitle").innerHTML=e,document.getElementById(this.id+"_nmdrCAL_ytitle").innerHTML=t,document.getElementById(this.id+"_nmdrCAL_daysdiv").innerHTML=i,this.afterRendering(),nmdr.core.tooltips.start("calhotspot","#BCDBE6","#0EB5ED")},t.makeDefaultView=function(){this.date.getDate();for(var e=this.date.getMonth(),t=this.date.getFullYear(),i=(new Date(t,e,1),new Date(t,e,0),new Date),s=[],a=new Date(t,e,1);a.getMonth()===e;)s.push(a.toDateString()),a.setDate(a.getDate()+1);for(var n=[],l=0==e?11:e-1,d=0==e?t-1:t,a=new Date(d,l,1);a.getMonth()==l;)n.push(a.toDateString()),a.setDate(a.getDate()+1);for(var o=[],l=11==e?0:e+1,d=11==e?t+1:t,a=new Date(d,l,1);a.getMonth()==l;)o.push(a.toDateString()),a.setDate(a.getDate()+1);for(var h=!1,r=!1,c=0,p=0,u=0,g=0,m=new Date(s[0]),y=0==m.getDay()?6:m.getDay()-1,f=0;f<7&&this.langData.weekdays[f]!=this.langData.weekdays[y];f++)g++;var w=[];w.push("<div class='hcells' style='display:block;'>"),this.showWN&&w.push("<div class='hcellWN' style='display:inline-block;width:"+this.langData.weekname+"px;'>"+this.langData.weekname+"</div>");for(L=0;L<this.langData.weekdays.length;L++){var v=this.cellWidth<80?this.langData.daysShort[6==L?0:L+1]:this.langData.weekdays[L],b=0==L?" hcell_fi":"";w.push("<div class='hcell "+b+"' style='display:inline-block;'><span class='hcellspan'>"+v.toUpperCase()+"</span></div>")}w.push("</div>"),this.days=[];for(var x=0;x<6;x++){w.push("<div style='display:block;'>");for(f=0;f<7;f++){var _=!1;y=0==(a=new Date(s[p])).getDay()?6:a.getDay()-1,h||this.langData.weekdays[y]!=this.langData.weekdays[f]||(h=!0),p==s.length&&(r=!0),h&&!r?(p++,_=!0):h?r&&(a=new Date(o[u++])):a=new Date(n[n.length-g+f]),this.days.push(a);var D=a.toDateString()==i.toDateString(),k=this.enabled&&this.dayIndex==c,C=a.isHoliday(),v=0==a.getDay()?6:a.getDay()-1,M="";if(null!=C){M="<strong>"+C.name+"</strong><br><br>Feiertag in:<br>";for(var L=0;L<C.federalstates.length;L++)M+=C.federalstates[L],L<C.federalstates.length-1&&(M+="<br>")}this.showWN&&0==f&&w.push("<div class='cellWN' style='display:inline-block;'>"+a.getWeek()+"</div>"),w.push("<div class='cell"+(0==f?" cell_fi":"")+(_?" cell_ac":" cell_pa")+(D?" cell_to":"")+(k?" cell_se":"")+(5==v||6==v?" cell_ss":"")+"' id='"+this.id+"_nmdrCAL_cell_"+c+"'"+(this.enabled&&_?" onclick=\"nmdr.core.$('"+this.id+"').openCellMenu(this, "+c+')"':"")+" style='display:inline-block;'><div class='daydiv' style='display:block;'><span class='"+(null!=C?"dayspan_ho calhotspot":_?"dayspan":"dayspan_pa")+"' id='"+this.id+"_nmdrCAL_cellspan_"+c+"'"+(null!=C?" tooltip='"+M+"'":"")+">"+a.getDate()+"</span></div><div class='userdiv' style='display:block;'>"+this.renderCell(a)+"</div></div>"),c++}w.push("</div>")}return w.join("")},t.makeTabularView=function(){this.date.getDate();for(var e=this.date.getMonth(),t=this.date.getFullYear(),i=new Date,s=[],a=new Date(t,e,1);a.getMonth()===e;)s.push(a.toDateString()),a.setDate(a.getDate()+1);for(var n=[],l=11==e?0:e+1,d=11==e?t+1:t,a=new Date(d,l,1);a.getMonth()==l;)n.push(a.toDateString()),a.setDate(a.getDate()+1);for(var o=0,h=0,r=0,c=!1,p=new Date(s[0]),u=0==p.getDay()?6:p.getDay()-1,g=[],m=[],y=[],f=[],w=[],o=0,v=0;v<7&&this.langData.weekdays[v]!=this.langData.weekdays[u];v++)r++;m.push("<td class='hcell1_user'></td>"),y.push("<td class='hcell2_user'></td>"),f.push("<td class='hcell3_user'></td>");for(A=0;A<31;A++){T=!1;u=0==(a=new Date(s[o])).getDay()?6:a.getDay()-1,o!=s.length?(o++,T=!0):a=new Date(n[h++]),this.days.push(a);var b=a.toDateString()==i.toDateString(),x=this.enabled&&this.dayIndex==A,_=a.isHoliday(),D="";if(null!=_){D="<strong>"+_.name+"</strong><br><br>Feiertag in:<br>";for(var k=0;k<_.federalstates.length;k++)D+=_.federalstates[k],k<_.federalstates.length-1&&(D+="<br>")}B=(T?" cell_ac":" cell_pa")+(b?" cell_to":"")+(x?" cell_se":"")+(5==u||6==u?" cell_ss":"");if(m.push("<td class='hcell1"+B+"' id='"+this.id+"_nmdrCAL_dcell_"+A+"'><span class='hcell1_span "+(null!=_?"dayspan_ho calhotspot":T?"dayspan":"dayspan_pa")+"' id='"+this.id+"_nmdrCAL_cellspan_"+A+"'"+(null!=_?" tooltip='"+D+"'":"")+">"+a.getDate()+"."+(a.getMonth()+1)+"</span></td>"),1==a.getDay()){0==A&&(c=!0);var C=!1,M=0==A?7:A<7?A:A<24?7:0;0==M&&(M=7,C=!c),y.push("<td class='hcell2' id='"+this.id+"_nmdrCAL_wcell_"+A+"' colspan="+M+"><span class='hcell_2_span'>"+a.addDay(a,c?0:-1).getWeek()+"</span></td>"),C&&y.push("<td class='hcell2' id='"+this.id+"_nmdrCAL_wcell_"+A+"' colspan="+(31-A)+"><span class='hcell2_span'>"+a.addDay(a,1).getWeek()+"</span></td>")}f.push("<td class='hcell3"+B+(0==A?" hcell_fr":"")+"' id='"+this.id+"_nmdrCAL_ncell_"+A+"'><span class='hcell3_span'>"+this.langData.daysShort[a.getDay()]+"</span></td>")}for(var L=0;L<this.tabuserLines;L++){w.push("<tr><td class='hcell4_user'>"+this.renderFirstColumn(L)+"</td>"),o=h=0;for(var A=0;A<31;A++){var T=!1;u=0==(a=new Date(s[o])).getDay()?6:a.getDay()-1,o!=s.length?(o++,T=!0):a=new Date(n[h++]);var B=(T?" cell_ac":" cell_pa")+(5==u||6==u?" cell_ss":"")+(0==A?" hcell_fr":"");w.push("<td class='hcell4"+B+"' id='"+this.id+"_nmdrCAL_ucell_"+L+"_"+A+"'"+(this.enabled&&T?" onclick=\"nmdr.core.$('"+this.id+"').openCellMenu(this,"+A+",'"+this.id+"_nmdrCAL_ucell_"+L+"_"+A+"')\"":"")+">"+this.renderTableCell(L,A,a)+"</td>")}w.push("</tr>")}return g.push("<table width='100%' height='auto' border='0' cellpadding='0' cellspacing='0'>"),g.push("<tr>"+m.join("")+"</tr>"),g.push("<tr>"+y.join("")+"</tr>"),g.push("<tr>"+f.join("")+"</tr>"),g.push(w.join("")),g.push("</table>"),g.join("")},t.makeYearView=function(){var e=this.date.getFullYear();return this.dayIndex=0,"<table width='100%' height='auto' cellpadding='4' cellspacing='0' border='0'><tr><td id='yearviewCell_0'>"+this.makeMonthTable("yearviewCell_0",e,0,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_1'>"+this.makeMonthTable("yearviewCell_1",e,1,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_2'>"+this.makeMonthTable("yearviewCell_2",e,2,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_3'>"+this.makeMonthTable("yearviewCell_3",e,3,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td></tr><tr><td id='yearviewCell_4'>"+this.makeMonthTable("yearviewCell_4",e,4,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_5'>"+this.makeMonthTable("yearviewCell_5",e,5,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_6'>"+this.makeMonthTable("yearviewCell_6",e,6,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_7'>"+this.makeMonthTable("yearviewCell_7",e,7,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td></tr><tr><td id='yearviewCell_8'>"+this.makeMonthTable("yearviewCell_8",e,8,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_9'>"+this.makeMonthTable("yearviewCell_9",e,9,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_10'>"+this.makeMonthTable("yearviewCell_10",e,10,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td><td id='yearviewCell_11'>"+this.makeMonthTable("yearviewCell_11",e,11,this.lang,!1,this.getYVTooltip,this.getYVBackground)+"</td></tr></table>"},t.makeMonthTable=function(e,t,i,s,a,n,l){var d=new Date(t,i,1),o=d.getFullYear(),h=this,r="<div class='yvContainer'><table width='100%' height='100%' cellpadding='0' cellspacing='0' border='0'><tr><td class='yvMontitle' colspan='7'><span>"+this.langData.months[d.getMonth()]+"&nbsp;&nbsp;"+o+"</span></td></tr>"+function(){d.getDate();for(var e=d.getMonth(),t=d.getFullYear(),i=(new Date(t,e,1),new Date(t,e,0),new Date),s=[],a=new Date(t,e,1);a.getMonth()===e;)s.push(a.toDateString()),a.setDate(a.getDate()+1);for(var o=[],r=0==e?11:e-1,c=0==e?t-1:t,a=new Date(c,r,1);a.getMonth()==r;)o.push(a.toDateString()),a.setDate(a.getDate()+1);for(var p=[],r=11==e?0:e+1,c=11==e?t+1:t,a=new Date(c,r,1);a.getMonth()==r;)p.push(a.toDateString()),a.setDate(a.getDate()+1);for(var u=!1,g=!1,m=0,y=0,f=0,w=new Date(s[0]),v=0==w.getDay()?6:w.getDay()-1,b=0;b<7&&h.langData.weekdays[b]!=h.langData.weekdays[v];b++)f++;for(var x="",_="<tr>",D=0;D<h.langData.weekdays.length;D++)_+="<td class='yvHcell'><span>"+h.langData.daysShort[6==D?0:D+1]+"</span></td>";_+="</tr>";for(var k=0;k<6;k++){x+="<tr>";for(b=0;b<7;b++){var C=!1;v=0==(a=new Date(s[m])).getDay()?6:a.getDay()-1,u||h.langData.weekdays[v]!=h.langData.weekdays[b]||(u=!0),m==s.length&&(g=!0),u&&!g?(m++,C=!0):u?g&&(a=new Date(p[y++])):a=new Date(o[o.length-f+b]),h.days.push(a);var M=a.toDateString()==i.toDateString(),L=a.isHoliday(),A=L?null:n(a),T=L?null:l(a),B=A?" style='background:"+(T||this.yvCellBackground)+"'":"";if(null!=L){A="<strong>"+L.name+"</strong><br><br>Feiertag in:<br>";for(var I=0;I<L.federalstates.length;I++)A+=L.federalstates[I],I<L.federalstates.length-1&&(A+="<br>")}var S=0==a.getDay()?6:a.getDay()-1,V=a.getDate(),F=h.enabled&&C&&null==L?" onclick=\"nmdr.core.$('"+h.id+"').openCellMenu(this,"+h.dayIndex+')"':"",e=C&&null!=A&&""!=A?"yvCellac"+(null!=L?" yvCellho":"")+"'"+B+" "+F+"><span class='calhotspot' tooltip='"+A+"'>"+V+"</span>":C?"yvCellac'"+F+"><span>"+V+"</span>":"'>";x+="<td id='"+h.id+"_cell"+h.dayIndex+"' class='yvCell"+(C?" cell_ac":" cell_pa")+(M&&C?" cell_to":"")+(5==S||6==S?" cell_ss":"")+B+" "+e+"</td>",h.dayIndex++}x+="</tr>"}return _+x}()+"</table></div>";return a&&(document.getElementById(e).innerHTML=r),r},t.getYVTooltip=function(e){return null},t.getYVBackground=function(e){return null},t.getDate=function(){return this.date},t.setDate=function(e){this.date="string"==typeof e?new Date(e):e,this.dayIndex=-1},t.selectDay=function(e,t){if(this.view==this.defaultView){if(-1!=this.dayIndex&&(l=document.getElementById(this.id+"_nmdrCAL_cell_"+this.dayIndex))&&l.classList.remove("cell_se"),this.dayIndex=-1,-1!=e){n=this.days[e];this.setDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.dayIndex=e,(l=document.getElementById(this.id+"_nmdrCAL_cell_"+e)).classList.add("cell_se")}}else if(this.view==this.tabularView){if(-1!=this.dayIndex){var i=document.getElementById(this.id+"_nmdrCAL_dcell_"+this.dayIndex),s=document.getElementById(this.id+"_nmdrCAL_ncell_"+this.dayIndex);i&&(i.classList.remove("cell_se"),s.classList.remove("cell_se"),(a=document.getElementsByClassName("ucellsel")).length>0&&((l=a[0]).classList.remove("ucellsel"),l.classList.remove("cell_se")))}if(this.dayIndex=-1,-1!=e){n=this.days[e];this.setDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.dayIndex=e;var i=document.getElementById(this.id+"_nmdrCAL_dcell_"+this.dayIndex),s=document.getElementById(this.id+"_nmdrCAL_ncell_"+this.dayIndex);if(i.classList.add("cell_se"),s.classList.add("cell_se"),t){var a=document.getElementById(t);a&&(a.classList.add("ucellsel"),a.classList.add("cell_se"))}}}else if((i=document.getElementsByClassName("ucellsel")).length>0&&((l=i[0]).classList.remove("ucellsel"),l.classList.remove("cell_se")),-1!=e){var n=this.days[e];this.setDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),this.date.getHours(),this.date.getMinutes(),0));var l=document.getElementById(this.id+"_cell"+e);l&&(l.classList.add("ucellsel"),l.classList.add("cell_se"))}},t.selectMonth=function(e){this.selectDay(-1),this.setDate(new Date(this.date.getFullYear(),e,this.date.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.dateChanged()},t.selectYear=function(e){this.selectDay(-1),this.setDate(new Date(e,this.date.getMonth(),this.date.getDate(),this.date.getHours(),this.date.getMinutes(),0)),this.dateChanged()},t.goPrevMonth=function(){this.selectDay(-1),this.setDate(this.date.prevMonth()),this.dateChanged()},t.goNextMonth=function(){this.selectDay(-1),this.setDate(this.date.nextMonth()),this.dateChanged()},t.goToday=function(){this.selectDay(-1),this.setDate(new Date),this.dateChanged()},t.refresh=function(){this.dateChanged()},t.dateChanged=function(){if(null!=this.date){var e=this;this.showLoader(!0),window.setTimeout(function(){e.prepareUserData(e.date.toISOString(),function(){e.showLoader(!1),e.makeCalendar()})},50)}},t.executeMenuCommand=function(e){var t=this;this.closeCellMenu(function(){t.executeCommand(e,t.getDate())})},t.prepareUserData=function(e,t){setTimeout(function(){t()},20)},t.renderFirstColumn=function(e){return""+e},t.renderCell=function(e){return""},t.renderTableCell=function(e){return""},t.afterRendering=function(){},t.prepareCommands=function(){return[{name:this.langData.commands[0],icon:"details.gif",enabled:!0,action:"view"},{name:this.langData.commands[1],icon:"editdetails.gif",enabled:!0,action:"edit"},{name:this.langData.commands[2],icon:"delete.gif",enabled:!0,action:"delete"}]},t.checkCommands=function(e,t,i){i()},t.executeCommand=function(e,t){alert(e+"  "+t)},t.changeView=function(e){var t=this;this.closeViewMenu(function(){switch(e){case 1:t.view=t.defaultView;break;case 2:t.view=t.tabularView;break;case 3:t.view=t.yearView}t.dateChanged()})},t.openViewMenu=function(e){this.selectDay(-1);var t=this,i=[];i.push("<style>.viewMenuTr {height:24px;} .viewMenuTr:hover {color:#fff;background:#33AAFF; cursor:pointer;}</style>"),i.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%'>"),i.push("<tr class='viewMenuTr' onclick=\"nmdr.core.$('"+this.id+"').changeView(1)\">"),i.push("<td style='width:24px;padding:3px 0 0 5px;'><img src='"+this.imagePath+"calview1.png'></td>"),i.push("<td><span>"+this.langData.views[0]+"</span></td>"),i.push("</tr>"),i.push("<tr class='viewMenuTr' onclick=\"nmdr.core.$('"+this.id+"').changeView(2)\">"),i.push("<td style='width:24px;padding:3px 0 0 5px;'><img src='"+this.imagePath+"calview2.png'></td>"),i.push("<td><span>"+this.langData.views[1]+"</span></td>"),i.push("</tr>"),i.push("<tr class='viewMenuTr' onclick=\"nmdr.core.$('"+this.id+"').changeView(3)\">"),i.push("<td style='width:24px;padding:3px 0 0 5px;'><img src='"+this.imagePath+"calview3.png'></td>"),i.push("<td><span>"+this.langData.views[2]+"</span></td>"),i.push("</tr></table>");var s=document.createElement("div");s.setAttribute("id",this.id+"_nmdrCAL_viewmenu"),s.innerHTML=i.join(""),s.style.cssText="position:absolute;background-color:white; border:1px solid #bbb; padding:3px; width:0; height:0; opacity:0; font-family:arial,verdana,sans-serif; font-weight:normal; font-size:12px; z-index:999;box-shadow:5px 5px 5px #eee; transition:all 500ms ease-in-out; -webkit-transition:all 500ms ease-in-out; -moz-transition:all 500ms ease-in-out; -o-transition:all 500ms ease-in-out;",document.body.appendChild(s),s.style.left=e.absLeft+"px",s.style.top=e.absTop+20+"px",s.style.height="80px",s.style.width="180px",s.style.opacity=1,nmdr.core.popup.open(s,e,null,function(e){t.closeViewMenu(e)})},t.closeViewMenu=function(e){var t=document.getElementById(this.id+"_nmdrCAL_viewmenu");null!=t&&(t.innerHTML="",t.style.width=0,t.style.height=0,t.style.opacity=0,nmdr.core.popup.close(),e&&e(),document.body.removeChild(t))},t.makeCellMenu=function(e,t){var i=document.getElementById(this.id+"_nmdrCAL_cellmenu");if(e){var s=this;return null==i&&((i=document.createElement("div")).setAttribute("id",this.id+"_nmdrCAL_cellmenu"),i.style.cssText="position:absolute;background-color:white; border:1px solid #bbb; padding:3px; width:0; height:0; opacity:0; font-family:arial,verdana,sans-serif; font-weight:normal; font-size:12px; z-index:998;box-shadow:3px 3px 3px #eee; transition:all 500ms ease-in-out; -webkit-transition:all 500ms ease-in-out; -moz-transition:all 500ms ease-in-out; -o-transition:all 500ms ease-in-out;",document.body.appendChild(i)),i.innerHTML="<div style='position:absolute; height:100%; width:100%; top:0px; left:0px; cursor:wait;background:#fff url("+this.imagePath+"loading.gif) no-repeat center center;opacity:0.75; z-index:999;'></div>",i.style.visibility="visible",i.style.left=t.absLeft+"px",i.style.top=t.absTop+20+"px",i.style.height=24*this.commands.length+28+"px",i.style.width="180px",i.style.opacity=1,void nmdr.core.popup.open(i,t,null,function(e){s.closeCellMenu(e)},function(e,t){for(var i=t.parentElement;null!=i;){if(i==e)return!1;i=i.parentElement}return!0})}var a=[];a.push("<style>.cellMenuTr {height:24px;} .cellMenuTr:hover {color:#fff;background:#33AAFF; cursor:pointer;} .menuclose:hover {cursor:pointer;}</style>"),a.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%'>"),a.push("<tr style='height:20px'><td colspan='2' style='text-align:right;background:#eee;padding:2px 3px 0 0;'>"),a.push("<img class='menuclose' src='"+this.imagePath+"dmclose.png' onclick=\"nmdr.core.$('"+this.id+"').closeCellMenu()\"></td></tr>");for(var n=0;n<this.commands.length;n++){var l=this.commands[n];a.push("<tr class='cellMenuTr'"+(l.enabled?" onclick=\"nmdr.core.$('"+this.id+"').executeMenuCommand('"+l.action+"')\"":"")+(l.enabled?"":" style='opacity:0.5;")+"'>"),a.push("<td style='width:24px;padding:3px 0 0 5px;'><img src='"+this.imagePath+l.icon+"'></td>"),a.push("<td><span>"+l.name+"</span></td>"),a.push("</tr>")}a.push("</table>"),i.innerHTML=a.join("")},t.openCellMenu=function(e,t,i){var s=this;this.selectDay(t,i),this.makeCellMenu(!0,e),this.commands=this.prepareCommands(),window.setTimeout(function(){s.checkCommands(s.commands,s.getDate(),function(){s.makeCellMenu(!1)})},50)},t.closeCellMenu=function(e){var t=document.getElementById(this.id+"_nmdrCAL_cellmenu");if(null!=t){this.selectDay(-1);var i=document.getElementById(this.id+"_nmdrCAL_container");t.style.left=i.absLeft+"px",t.style.top=i.absTop+"px",t.style.width=0,t.style.height=0,t.style.opacity=0,t.style.visibility="hidden",nmdr.core.popup.close(),e&&e()}},t.makeMonthsList=function(){for(var e="",t=this.monthIndex;t<this.langData.months.length;t++)e+="<tr><td class='monthcell' id='"+this.id+"_nmdrCAL_monthcell_"+t+"' onclick=\"nmdr.core.$('"+this.id+"').selectMonth("+t+');"><span>'+this.langData.months[t]+"</span></td></tr>";return"<table class='monthstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+e+"</table>"},t.openMonthPopup=function(){var e=this,t=document.getElementById(this.id+"_nmdrCAL_mtitle"),i=document.getElementById(this.id+"_nmdrCAL_monthsdiv"),s=document.getElementById(this.id+"_nmdrCAL_container");i.style.position="absolute",i.style.left=t.absLeft-s.absLeft+"px",i.style.top=t.absTop-s.absTop+20+"px",i.style.width=this.moDDListWidth+"px",nmdr.core.popup.open(i,t,null,function(t){e.closeMonthPopup(t)})},t.closeMonthPopup=function(e){document.getElementById(this.id+"_nmdrCAL_monthsdiv").style.width="0",nmdr.core.popup.close(),e&&e()},t.scrollMonths=function(e,t){t<=-120?e.monthIndex<5&&e.monthIndex++:e.monthIndex>0&&e.monthIndex--,document.getElementById(e.id+"_nmdrCAL_monthsdiv").innerHTML=e.makeMonthsList()},t.makeYearsList=function(){for(var e="",t=this.yearIndex;t<this.yearIndex+7;t++)e+="<tr><td class='yearcell' id='"+this.id+"_nmdrCAL_yearcell_"+t+"' onclick=\"nmdr.core.$('"+this.id+"').selectYear("+t+');"><span>'+t+"</span></td></tr>";return"<table class='yearstable' width='100%' height='100%' cellpadding='0' cellspacing='0'>"+e+"</table>"},t.openYearPopup=function(){var e=this,t=document.getElementById(this.id+"_nmdrCAL_ytitle"),i=document.getElementById(this.id+"_nmdrCAL_yearsdiv"),s=document.getElementById(this.id+"_nmdrCAL_container");i.style.position="absolute",i.style.left=t.absLeft-s.absLeft+"px",i.style.top=t.absTop-s.absTop+20+"px",i.style.width=this.yeDDListWidth+"px",nmdr.core.popup.open(i,t,null,function(t){e.closeYearPopup(t)})},t.closeYearPopup=function(e){document.getElementById(this.id+"_nmdrCAL_yearsdiv").style.width="0",nmdr.core.popup.close(),e&&e()},t.scrollYears=function(e,t){t<=-120?e.yearIndex<2094&&e.yearIndex++:e.yearIndex>1995&&e.yearIndex--,document.getElementById(e.id+"_nmdrCAL_yearsdiv").innerHTML=e.makeYearsList()},t.showLoader=function(e){var t=this.getElementsByClassName("loader")[0];t&&(t.style.display=e?"inline":"none",t.style.cursor=e?"wait":"default")},t}