function nmdrCarousel(t){var i=nmdr.core.$(t,"nmdrCarousel");if(null!=i)return i.paddingH=2,i.paddingV=2,i.mode=1,i.width=0,i.height=0,i.caroWidth=0,i.caroHeight=0,i.bgColor="#eee",i.toolbar=!0,i.toolbarHeight=28,i.firstCaro=0,i.visibleCaros=4,i.animation=!1,i.autoplay=!1,i.autoplayDir=1,i.autoplayDelay=800,i.autoplayPaused=!1,i.autoplayID=null,i.responsive=!1,i.imagePath=null,i.pics=[],i.carousel=function(t){return this.mode=t.hasOwnProperty("mode")?t.mode:1,this.width=t.hasOwnProperty("width")?t.width:this.parentElement.clientWidth,this.height=t.hasOwnProperty("height")?t.height:this.parentElement.clientHeight,this.imagePath=t.hasOwnProperty("imagePath")?t.imagePath+"/":"img/carous/",this.toolbar=!t.hasOwnProperty("toolbar")||t.toolbar,this.visibleCaros=t.hasOwnProperty("caros")?t.caros:4,this.bgColor=t.hasOwnProperty("bgColor")?t.bgColor:"#eee",this.autoplayDelay=t.hasOwnProperty("delay")?t.delay:800,this.pics=t.pics,this.visibleCaros=Math.min(this.visibleCaros,t.pics.length-1),this.style.width=this.width+"px",this.style.width=this.width+"px",this.style.height=this.height+"px",this.style.padding="0px",this.style.backgroundColor=this.bgColor,this.build(),this.responsive&&nmdr.core.utils.updateOnWinResized(this,function(i){t.autoplay&&i.stopAutoplay(),i.width=i.parentElement.clientWidth,i.build(),t.autoplay&&i.startAutoplay()}),t.autoplay&&this.startAutoplay(),this},i.build=function(){this.caroWidth=Math.round((this.width-(this.visibleCaros+1)*this.paddingH)/this.visibleCaros),this.caroHeight=this.height-2*this.paddingV-(this.toolbar?this.toolbarHeight+this.paddingV:0);var t=[];t.push(this.createStyles()),t.push(this.createCarousel(!0)),t.push(this.createToolbar()),this.innerHTML=t.join("")},i.createStyles=function(){var t="#"+this.id;return"<style type='text/css'>"+t+" { position:relative !important; }"+t+" .caroArea { position:absolute; left:"+this.paddingH+"px; top:"+this.paddingV+"px; width:"+(this.width-2*this.paddingH)+"px; height:"+this.caroHeight+"px; padding:0px; overflow:hidden; }"+t+" .caroView {position:absolute; left:0px; top:0px; }"+t+" .caroPic { position:absolute; top:0px; width:"+this.caroWidth+"px; height:"+this.caroHeight+"px; text-align:left;background-size:cover; background-repeat:no-repeat; cursor:pointer; }"+t+" .caroDesc { position:absolute; top:100%; left:0; bottom:0; right:0; padding:5px;color:#fff; background:rgba(0,0,0,0.3); font:13px Arial,Helvetica,sans-serif; transition:0.5s;}"+t+" .caroPic:hover .caroDesc:first-child { transition:0.5s; top:0; }"+t+" .caroToolbar { position:absolute; left:"+this.paddingH+"px; top:"+(this.caroHeight+2*this.paddingV)+"px; width:"+(this.width-2*this.paddingH)+"px; height:"+this.toolbarHeight+"px; background:#fff; text-align:left; }"+t+" .caimg { padding-top:4px; }"+t+" .catd { width:30px; text-align: center; }"+t+" .catd:hover { background:#ddd; cursor:pointer; }</style>"},i.createCarousel=function(t){var i=[],a=0;if(1==this.mode){var s=this.pics.length;this.firstCaro==s&&(this.firstCaro=0);for(n=this.firstCaro;n<=this.firstCaro+this.visibleCaros;n++){var o=n>=s?n-s:n,e=(l=this.pics[o]).img?"background-image:url("+l.img+");":"background:"+nmdr.core.utils.createRandumColor()+";";i.push("<div class='caroPic' style='left:"+a+"px; "+e+"' onclick=\"nmdr.core.$('"+this.id+"').startLink('"+l.url+"');\" onmouseover=\"nmdr.core.$('"+this.id+"').pauseAutoplay(true);\" onmouseout=\"nmdr.core.$('"+this.id+"').pauseAutoplay(false);\"><div class='caroDesc'><h3>"+l.title+"</h3><span class='caroText'>"+l.desc+"</span></div></div>"),a+=this.caroWidth+this.paddingH}if(t)return"<div class='caroArea'><div class='caroView' id='"+this.id+"_caroView'>"+i.join("")+"</div></div>";var r=document.getElementById(this.id+"_caroView");r.style.left=0,r.innerHTML=i.join("")}else if(2==this.mode){i.push("<div class='caroArea'><div class='caroView' id='"+this.id+"_caroView'>");for(var n=0;n<this.pics.length;n++){var l=this.pics[n],e=l.img?"background-image:url("+l.img+");":"background:"+nmdr.core.utils.createRandumColor()+";";i.push("<div class='caroPic' style='left:"+a+"px; "+e+"' onclick=\"nmdr.core.$('"+this.id+"').startLink('"+l.url+"');\" onmouseover=\"nmdr.core.$('"+this.id+"').pauseAutoplay(true);\" onmouseout=\"nmdr.core.$('"+this.id+"').pauseAutoplay(false);\"><div class='caroDesc'><h3>"+l.title+"</h3><span class='caroText'>"+l.desc+"</span></div></div>"),a+=this.caroWidth+this.paddingH}return i.push("</div></div>"),i.join("")}},i.createToolbar=function(){if(this.toolbar){if(1==this.mode)return"<div class='caroToolbar'><table border='0' cellpadding='0' cellspacing='0' height='100%'><tr><td class='catd' onclick=\"nmdr.core.$('"+this.id+"').startAutoplay();\"><img class='caimg' src='"+this.imagePath+"start.png' title='start'></td><td class='catd' onclick=\"nmdr.core.$('"+this.id+"').stopAutoplay();\"><img class='caimg' src='"+this.imagePath+"stop.png' title='stop'></td></tr></table></div>";if(2==this.mode)return"<div class='caroToolbar'><table border='0' cellpadding='0' cellspacing='0' height='100%'><tr><td class='catd' id='"+this.id+"_b1' onclick=\"nmdr.core.$('"+this.id+"').goBackward(null, true);\"><img class='caimg' src='"+this.imagePath+"prev.png' title='prev'></td><td class='catd' id='"+this.id+"_b2' onclick=\"nmdr.core.$('"+this.id+"').goForward(null, true);\"><img class='caimg' src='"+this.imagePath+"next.png' title='next'></td><td class='catd' id='"+this.id+"_b3' onclick=\"nmdr.core.$('"+this.id+"').stopAutoplay();\"><img class='caimg' src='"+this.imagePath+"stop.png' title='stop'></td><td class='catd' id='"+this.id+"_b4' onclick=\"nmdr.core.$('"+this.id+"').startAutoplay();\"><img class='caimg' src='"+this.imagePath+"start.png' title='start'></td></tr></table></div>"}return""},i.slide=function(t){if(!this.animation){this.animation=!0;var i=document.getElementById(this.id+"_caroView");nmdr.core.animate.move(null,i,i.offsetLeft-this.caroWidth-this.paddingH,i.offsetTop,function(i){i.firstCaro+=1,i.animation=!1,i.createCarousel(),t()},this)}},i.goBackward=function(t,i){if(!(i&&this.autoplay||this.animation||0==this.firstCaro)){this.animation=!0;var a=document.getElementById(this.id+"_caroView");nmdr.core.animate.move(null,a,a.offsetLeft+this.caroWidth+this.paddingH,a.offsetTop,function(i){i.firstCaro--,i.animation=!1,t&&t()},this)}},i.goForward=function(t,i){if((!i||!this.autoplay)&&!this.animation&&this.firstCaro<this.pics.length-this.visibleCaros){this.animation=!0;var a=document.getElementById(this.id+"_caroView");nmdr.core.animate.move(null,a,a.offsetLeft-this.caroWidth-this.paddingH,a.offsetTop,function(i){i.firstCaro++,i.animation=!1,t&&t()},this)}},i.startAutoplay=function(){if(!this.autoplay){this.autoplay=!0,this.autoplayPaused=!1,2==this.mode&&this.updateButtons(!1);var t=this,i=function(){t.autoplay&&!t.autoplayPaused&&(1==t.mode?t.slide(function(){clearInterval(t.autoplayID),t.autoplayID=setInterval(i,t.autoplayDelay)}):2==t.mode&&(1==t.autoplayDir?t.firstCaro<t.pics.length-t.visibleCaros&&t.goForward(function(){t.autoplayDir=t.firstCaro<t.pics.length-t.visibleCaros?1:-1,clearInterval(t.autoplayID),t.autoplayID=setInterval(i,t.autoplayDelay)}):0!=t.firstCaro&&t.goBackward(function(){t.autoplayDir=0!=t.firstCaro?-1:1,clearInterval(t.autoplayID),t.autoplayID=setInterval(i,t.autoplayDelay)})))};i()}},i.stopAutoplay=function(){this.autoplay&&(this.autoplay=!1,this.animation=!1,2==this.mode&&this.updateButtons(!0),clearInterval(this.autoplayID))},i.pauseAutoplay=function(t){this.autoplayPaused=t},i.updateButtons=function(t){document.getElementById(this.id+"_b1").style.opacity=t?"1.0":"0.2",document.getElementById(this.id+"_b2").style.opacity=t?"1.0":"0.2"},i.startLink=function(t){alert(t)},i}