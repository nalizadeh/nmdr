function nmdrTable(e){e=nmdr.core.$(e,"nmdrTable");if(null!=e){var i=null;return e.columns=[],e.dataRows=[],e.originRows=[],e.selectedRows=[],e.menuCommands=[],e.selectedColumn=-1,e.selectedColumnOld=-1,e.pageNumber=1,e.pageCount=0,e.totalNumber=0,e.firstRow=0,e.lastRow=0,e.clickedRow=-1,e.rowMenuActRow=-1,e.headerMenuOpen=!1,e.rowMenuOpen=!1,e.SORT_ASCENDING="SortZA",e.SORT_DESCENDING="SortAZ",e.props={imagePath:"img/",rowLimit:10,sortingColumn:-1,sortingDirection:null,filters:{},customQuery:null,dataSplitter:",",filterSplitter:"&",filterDataSplitter:"|",menuColumn:-1,clientHandling:!0,doPostBack:!1,multiSelection:!1,columnsResizable:!1,showRowCommands:!1,showHeader:!1,showFooter:!1,showBorder:!0,showGrids:!0,showShadow:!1,showFilterData:!0,scrollable:!1,scrollable2:!1,dummyCols:6,dummyRows:6,pageX:void 0,curCol:void 0,curColWidth:void 0,lang:"en",patternNames:"",removeSortingLable:"",setFilterLable:"",removeFilterLable:"",pageLable:"",ofLable:"",totalLable:"",rowCountLable:"",gotoPageLable:"",color:"#000000",background:"#ffffff",borderColor:"#e0e0e0",borderWidth:"1px",fontFamily:"Arial, Helvetica, sans-serif",fontWidth:"normal",fontSize:"13px",checkSelectionColor:"rgb(0,113,198)",menuCellBackground:"rgb(156, 206, 240)",selColumnWidth:20,menuColumnWidth:24,headerHeight:24,headerPadding:3,headerWhiteSpace:"nowrap",headerTextOverflow:"ellipsis",headerColor:"#000",headerBackground:"rgb(248, 248, 248)",headerFontFamily:"Arial, Helvetica, sans-serif",headerFontWidth:"bold",headerFontSize:"13px",headerSelectionColor:"rgba(156, 206, 240, 0.5)",headerHOverColor:"#000",headerHOverBackColor:"rgba(205,230,247,0.5)",bodyRowHeight:24,bodyPadding:3,bodyWhiteSpace:"nowrap",bodyTextOverflow:"ellipsis",bodySelectionColor:"#000",bodySelectionBackColor:"rgba(156, 206, 240, 0.5)",bodyHOverColor:"#000",bodyHOverBackColor:"rgba(205,230,247,0.5)",bodyAlternateColor:"rgba(242,246,252,0.5)",footerHeight:42,footerColor:"#000000",footerBackColor:"rgb(248, 248, 248)",footerFontFamily:"Arial, Helvetica, sans-serif",footerFontWidth:"normal",footerFontSize:"12px",footerShowPager:!0,footerShowGoPage:!0,footerShowRowCount:!0,footerShowPageInfo:!0,headerMenuWidth:250},e.build=function(e){e=e||{},this.props=nmdr.core.utils.mergeProperties(this.props,e),this.localization(),this.loadData(!0,!0)},e.localization=function(){"en"===this.props.lang?(this.props.patternNames=["is equal/x","is not equal/x","contains/x","not contains/x","starts with/x","ends with/x"],this.props.removeSortingLable="Remove Sorting",this.props.removeFilterLable="Remove Filter",this.props.setFilterLable="Set Filter",this.props.pageLable="Page",this.props.ofLable="of",this.props.totalLable="Total",this.props.rowCountLable="Row count",this.props.gotoPageLable="Go to page"):"de"===this.props.lang?(this.props.patternNames=["is equal/ist gleich","is not equal/ist nicht gleich","contains/enthält","not contains/enthält nicht","starts with/beginnt mit","ends with/endet mit"],this.props.removeSortingLable="Sortierung löschen",this.props.removeFilterLable="Filter löschen",this.props.setFilterLable="Filter setzen",this.props.pageLable="Seite",this.props.ofLable="von",this.props.totalLable="Total",this.props.rowCountLable="Anzahl Zeilen",this.props.gotoPageLable="Gehe zur Seite"):"fr"===this.props.lang?(this.props.patternNames=["is equal/est le même","is not equal/n'est pas égal","contains/contient","not contains/ne contient pas","starts with/commence par","ends with/se termine par"],this.props.removeSortingLable="Supprimer le tri",this.props.removeFilterLable="Supprimer le filtre",this.props.setFilterLable="Définir le filtre",this.props.pageLable="Page",this.props.ofLable="de",this.props.totalLable="Totalement",this.props.rowCountLable="Nombre de lignes",this.props.gotoPageLable="Aller à la page"):"es"===this.props.lang&&(this.props.patternNames=["is equal/es lo mismo","is not equal/no es igual","contains/contiene","not contains/no contiene","starts with/comienza con","ends with/termina con"],this.props.removeSortingLable="Eliminar clasificación",this.props.removeFilterLable="Eliminar filtro",this.props.setFilterLable="Establecer filtro",this.props.pageLable="Página",this.props.ofLable="de",this.props.totalLable="Total",this.props.rowCountLable="Numero de lineas",this.props.gotoPageLable="Ir a la página")},e.renderHeaderCell=function(e,t){return null},e.renderBodyCell=function(e,t,o,s){return null},e.getColumnWidth=function(e){return null},e.handleEvents=function(e){},e.openRow=function(e){alert("open row: "+e)},e.editRow=function(e){alert("edit row: "+e)},e.deleteRow=function(e){alert("delete row: "+e)},e.makeView=function(){var e=[],t=this.props,o="#"+this.id,t="<style type='text/css'>"+o+" { position: relative !important; width: 100%; height: 100%; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -o-box-sizing: border-box;}"+o+" .nmdrTB_content { overflow: hidden; color:"+t.color+"; background:"+t.background+"; font-family: "+t.fontFamily+"; font-weight: "+t.fontWidth+"; font-size: "+t.fontSize+"; border-width:"+(t.showBorder?t.borderWidth:"0px")+"; border-color:"+t.borderColor+"; border-style: solid; cursor: default; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none;  user-select: none;"+(t.showShadow?"box-shadow:3px 3px 3px #ccc;":"")+"}"+o+" .nmdrTB_table { border-collapse: collapse; }"+o+" .nmdrTB_table td.nmdrTB_body_td { vertical-align: middle; }"+o+" .nmdrTB_table img { vertical-align: middle; cursor: pointer; }"+o+" .nmdrTB_header { background: "+t.headerSelectionColor+"; height: "+t.headerHeight+"px; }"+o+" .nmdrTB_header_tr {}"+o+" .nmdrTB_header_th { height: "+t.headerHeight+"px; color: "+t.headerColor+"; background: linear-gradient(#eee, "+t.headerBackground+"); font-family: "+t.headerFontFamily+"; font-weight: "+t.headerFontWidth+"; font-size: "+t.headerFontSize+"; border-bottom-width:"+(t.showBorder||t.showGrids?t.borderWidth:"0px")+"; border-bottom-color:"+t.borderColor+"; border-bottom-style: solid; padding: "+t.headerPadding+"px; padding-top: "+(t.headerPadding+1)+"px;"+(t.columnsResizable?" padding-right: 0px;":"")+" text-align: left; white-space: "+t.headerWhiteSpace+"; text-overflow: "+t.headerTextOverflow+"; overflow: hidden;}"+o+" .nmdrTB_header_tr th.nmdrTB_header_th:not(:first-child) { border-left: "+(t.showGrids?t.borderWidth:"0px")+" solid "+t.borderColor+";}"+o+" .nmdrTB_header_th:hover { cursor: pointer; color: "+t.headerHOverColor+"; background: "+t.headerHOverBackColor+"; transition:all 0.5s ease-in-out;}"+o+" .nmdrTB_header_th_dv {}"+o+" .nmdrTB_header_th_se { width:"+t.selColumnWidth+"px; text-align:center; }"+o+" .nmdrTB_header_th_cm { width:"+t.menuColumnWidth+"px; text-align:center; }"+o+" .nmdrTB_header_th_cm img { opacity: 0.3; }"+o+" .nmdrTB_header_th_rs { width:4px; cursor: col-resize; }"+o+" .nmdrTB_body_tr { height: "+t.bodyRowHeight+"px; }"+o+" .nmdrTB_body_td { height: "+t.bodyRowHeight+"px; padding: "+t.bodyPadding+"px;"+(t.columnsResizable?" padding-right: 0px;":"")+" white-space: "+t.bodyWhiteSpace+"; text-overflow: "+t.bodyTextOverflow+"; overflow: hidden;}"+o+" .nmdrTB_body_tr:nth-child(even) { background: "+t.bodyAlternateColor+"; }"+o+" .nmdrTB_body_tr:nth-child(odd) { background: "+t.background+"}"+o+" .nmdrTB_body_tr:hover { color: "+t.bodyHOverColor+"; background: "+t.bodyHOverBackColor+"; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td:first-child { background: "+t.bodyHOverBackColor+"; }"+o+" .nmdrTB_body_tr td.nmdrTB_body_td:not(:first-child) { border-left: "+(t.showGrids?t.borderWidth:"0px")+" solid "+t.borderColor+";}"+o+" .nmdrTB_body_tr td.nmdrTB_body_td { border-bottom: "+(t.showGrids?t.borderWidth:"0px")+" solid "+t.borderColor+";}"+o+" .nmdrTB_body_tr td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: hidden; float:right; }"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: hidden; float:right; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: visible; opacity: 0.3; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td:first-child img:first-of-type { visibility: visible; }"+o+" .nmdrTB_body_tr:hover .nmdrTB_body_cm { visibility: visible; opacity: 0.3; }"+o+" .nmdrTB_body_tr_sel { color: "+t.bodySelectionColor+"; background: "+t.bodySelectionBackColor+"; }"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td:not(:first-child) { border-left: "+(t.showGrids?t.borderWidth:"0px")+" solid "+t.borderColor+";}"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td { border-bottom: "+(t.showGrids?t.borderWidth:"0px")+" solid "+t.borderColor+";}"+o+" .nmdrTB_body_tr_sel:hover td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: visible !important; opacity: 1 !important;}"+o+" .nmdrTB_body_td_se { width:"+t.selColumnWidth+"px; min-width:"+t.selColumnWidth+"px; max-width:"+t.selColumnWidth+"px; text-align:center;}"+o+" .nmdrTB_body_td_se_sel { background: "+t.checkSelectionColor+"; }"+o+" .nmdrTB_body_se { visibility: hidden; }"+o+" .nmdrTB_body_se_sel { visibility: visible; }"+o+" .nmdrTB_body_td_cm { width:"+t.menuColumnWidth+"px; min-width:"+t.menuColumnWidth+"px; max-width:"+t.menuColumnWidth+"px; text-align:center;}"+o+" .nmdrTB_body_td_cm_sel { background: "+t.menuCellBackground+"; }"+o+" .nmdrTB_body_cm { visibility: hidden; }"+o+" .nmdrTB_body_cm_sel { visibility: visible; }"+o+" .nmdrTB_footer {}"+o+" .nmdrTB_footer_tr {}"+o+" .nmdrTB_footer_td { padding: 0px; }"+o+" .nmdrTB_footer_div { width: 100%; height: "+t.footerHeight+"px; color: "+t.footerColor+"; background: linear-gradient(#eee, "+t.footerBackColor+"); font-family: "+t.footerFontFamily+"; font-weight: "+t.footerFontWidth+"; font-size: "+t.footerFontSize+"; border-top-width: "+(t.showBorder&&!t.showGrids?t.borderWidth:t.scrollable?"1px":"0px")+"; border-top-color: "+t.borderColor+"; border-top-style: solid;}"+o+" .nmdrTB_headerMenu { display: none; background-color: white; border: 1px solid #bbb; padding: 10px; width: "+t.headerMenuWidth+"px; line-height: 22px; font-family: arial,verdana,sans-serif; font-weight: normal; font-size: 12px; z-index: 999; box-shadow: 5px 5px 5px #ddd; transition: all 0.5s ease-in-out;}.nmdrTBFcheckbox:hover {cursor:pointer; background:#0073C6; color:#FFFFFF;}"+o+" .nmdrTB_rowMenu { display: none; background-color: white; border: 1px solid #bbb; padding: 5px; width: 200px; line-height: 22px; font-family: arial,verdana,sans-serif; font-weight: normal; font-size:12px; z-index: 999; box-shadow:5px 5px 5px #ddd; transition:all 0.5s ease-in-out;}"+o+" .nmdrTB_rowMenu img { vertical-align: middle; }"+o+" .nmdrTB_rowMenu_tr { height:28px; }"+o+" .rowMenuActRow, .nmdrTB_rowMenu_tr:hover {  background: "+t.bodyHOverBackColor+" !important;  cursor: pointer;}"+o+' .nmdrTB_loader { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; display: none; cursor: wait; z-index: 999; background:#ffffff url("'+t.imagePath+'spLoader.gif") no-repeat center center; opacity: 0.75; filter: alpha(opacity=75);}'+(t.scrollable?o+" .nmdrTB_header_tr { display: block; }"+o+" .nmdrTB_body { display: block; overflow-y: scroll; overflow-x:hidden; height: "+(this.offsetHeight-t.headerHeight-t.footerHeight)+"px; }":o+" .nmdrTB_content {"+(t.scrollable2?"position:absolute; left:0px; top:0px; width:100%; height:100%; overflow-y:scroll;}":"}"))+"</style>";e.push(t),e.push("<script type='text/javascript'>(function() { })();<\/script>"),e.push(this.makeRowMenu(!0)),e.push(this.makeHeaderMenu()),e.push(this.makeContent()),document.getElementById(this.id).innerHTML=e.join(""),this.configSize(),this.initEvents()},e.makeContent=function(){var e=[];return e.push("<div class='nmdrTB_loader'></div>"),e.push("<div class='nmdrTB_content' tabindex='1'>"),e.push(this.makeTable()),e.push("</div>"),e.join("")},e.makeTable=function(){var e=[];return e.push("<table class='nmdrTB_table' border='0' cellpadding='0' cellspacing='0' onselectstart='return false' ondragstart='return false'>"),e.push(this.makeHeader()),e.push(this.makeBody()),e.push(this.makeFooter()),e.push("</table>"),e.join("")},e.makeHeader=function(){if(!this.props.showHeader)return"";var e=[];e.push("<thead class='nmdrTB_header'>"),e.push("<tr class='nmdrTB_header_tr'>");for(var t=0;t<this.columns.length;t++){0==t&&(e.push("<th class='nmdrTB_header_th nmdrTB_header_th_se'><img src='"+this.props.imagePath+"spCheck.png' "),e.push("onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'selectAll');\"></th>"),this.props.selColumnWidth),t+1==this.props.menuColumn&&(e.push("<th class='nmdrTB_header_th nmdrTB_header_th_cm'><img src='"+this.props.imagePath+"spCMenu.gif'></th>"),this.props.menuColumnWidth);var o=this.getColumnWidth(t),s=this.props.sortingColumn==t?"<img src='"+this.props.imagePath+"sp"+this.props.sortingDirection+".png'":"",i=null!=this.props.filters[t]?"<img src='"+this.props.imagePath+"spFilter.png'>":"",r=this.renderHeaderCell(t,this.columns[t]),n=this.props.columnsResizable?"<td class='nmdrTB_header_th_rs' onmousedown=\"nmdr.core.$('"+this.id+"').resizeColumn(event, 0,"+t+');" onmouseover="nmdr.core.$(\''+this.id+"').resizeColumn(event, 1,"+t+');" onmouseout="nmdr.core.$(\''+this.id+"').resizeColumn(event, 2,"+t+');" onmousemove="nmdr.core.$(\''+this.id+"').resizeColumn(event, 3,"+t+');" onmouseup="nmdr.core.$(\''+this.id+"').resizeColumn(event, 4,"+t+');"></td>':"";e.push("<th class='nmdrTB_header_th' id='"+this.id+"_nmdrTB_header_th"+t+"' "),e.push(o?"style='width:"+o+"px; min-width:"+o+"px; max-width:"+o+"px;'":""),e.push("onmouseOver=\"nmdr.core.$('"+this.id+"').selectHeader("+t+', true);" '),e.push("onmouseOut=\"nmdr.core.$('"+this.id+"').selectHeader("+t+', false);" '),e.push("onclick=\"nmdr.core.$('"+this.id+"').selectColumn(event, "+t+');">'),e.push("<table width=100% border='0' cellpadding='0' cellspacing='0'><tr>"),e.push("<td style='padding:0px;'><div class='nmdrTB_header_th_dv' onClick=\"nmdr.core.$('"+this.id+"').sortColumn("+t+');">'+(r||this.columns[t])+"</div></td>"),e.push("<td style='width:52px; padding:0px;'><table border='0' cellpadding='0' cellspacing='0'><tr>"),e.push("<td style='width:16px; padding:0px 0px 1px 0px;' onClick=\"nmdr.core.$('"+this.id+"').sortColumn("+t+');">'+s+"</td>"),e.push("<td style='width:16px; padding:0px 0px 1px 0px;' onClick=\"nmdr.core.$('"+this.id+"').sortColumn("+t+');">'+i+"</td>"),e.push("<td style='width:16px; padding:0px; text-align:right;'>"),e.push("<img id='"+this.id+"_nmdrTB_hdm"+t+"' src='"+this.props.imagePath+"spMenu.png' "),e.push("onclick=\"nmdr.core.$('"+this.id+"').openHeaderMenu(event, this);\" style='visibility:hidden'></td>"),e.push("</tr></table></td>"),e.push(n),e.push("</tr></table></th>"),0}return e.push("</tr></thead>"),e.join("")},e.makeBody=function(){var e=[];if(e.push("<tbody class='nmdrTB_body'>"),0<this.dataRows.length)for(var t=this.props.clientHandling?this.firstRow:1,o=this.props.clientHandling?this.lastRow:this.props.rowLimit>this.totalNumber?this.totalNumber:this.props.rowLimit,s=t;s<=o;s++){var i=this.dataRows[s-1].split(this.props.dataSplitter),r=-1!=this.selectedRows.indexOf(s);e.push("<tr class='nmdrTB_body_tr"+(r?"_sel":"")+"' id='"+this.id+"_nmdrTB_body_tr"+s+"' "),e.push("onClick=\"nmdr.core.$('"+this.id+"').selectRows(event, "+s+');">');for(var n=0;n<i.length;n++){0==n&&(e.push("<td class='nmdrTB_body_td nmdrTB_body_td_se'>"),e.push("<img class='nmdrTB_body_se' src='"+this.props.imagePath+"spCheckSel.png'></td>")),n+1==this.props.menuColumn&&(e.push("<td class='nmdrTB_body_td nmdrTB_body_td_cm'>"),e.push("<img class='nmdrTB_body_cm' src='"+this.props.imagePath+"spCMenu.gif' "),e.push("onClick=\"nmdr.core.$('"+this.id+"').openRowMenu(event, "+s+');"></td>'));var l=this.getColumnWidth(n),d=this.renderBodyCell(s-1,n,i[n],r),a=this.props.showRowCommands&&n==i.length-1?"<table width='100%' height='100%' border='0' cellpadding='0' cellspacing='0'><tr><td style='vertical-align: middle;'>"+(d||i[n])+"</td><td style='text-align: right;'><a class='nmdrTB_rowcontrol'><img src='"+this.props.imagePath+"spOpen.gif' title='open row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'openRow', "+s+");\">&nbsp;<img src='"+this.props.imagePath+"spEdit.gif' title='edit row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'editRow', "+s+");\">&nbsp;<img src='"+this.props.imagePath+"spDelete.gif' title='delete row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'deleteRow', "+s+');">&nbsp;</a></td></tr></table>':null;this.props.scrollable&&l&&n==i.length-1&&(l-=18),e.push("<td class='nmdrTB_body_td' id='"+this.id+"_nmdrTB_body_td_"+s+"x"+n+"' param='"+i[n]+"'"),e.push(l?" style='width:"+l+"px; min-width:"+l+"px; max-width:"+l+"px;'>":">"),e.push(a||d||i[n]+"</td>")}e.push("</tr>")}return e.push("</tbody>"),e.join("")},e.makeFooter=function(){if(!this.props.showFooter)return"";var e=[],t=this.columns.length+(-1==this.props.menuColumn?1:2);return e.push("<tfoot class='nmdrTB_footer'>"),e.push("<tr class='nmdrTB_footer_tr'>"),e.push("<td class='nmdrTB_footer_td' colspan="+t+">"),e.push("<div class='nmdrTB_footer_div'>"+this.renderFooter()+"</div>"),e.push("</td></tr></tfoot>"),e.join("")},e.renderFooter=function(){var e=[];if(e.push("<table width='100%' height='100%' border='0' cellpadding='4px' cellspacing='0'><tr>"),this.props.footerShowPager)if(0<this.dataRows.length){var t=1<this.firstRow?"<img src='"+this.props.imagePath+"spPrevend.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'firstPage');\"":"<img src='"+this.props.imagePath+"spPrevenddis.gif'",o=1<this.firstRow?"<img src='"+this.props.imagePath+"spPrev.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'prevPage');\"":"<img src='"+this.props.imagePath+"spPrevdis.gif'",s=this.lastRow<this.totalNumber?"<img src='"+this.props.imagePath+"spNext.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'nextPage');\"":"<img src='"+this.props.imagePath+"spNextdis.gif'",i=this.lastRow<this.totalNumber?"<img src='"+this.props.imagePath+"spNextend.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'lastPage');\"":"<img src='"+this.props.imagePath+"spNextenddis.gif'";if(e.push("<td><table border='0' cellpadding='0' cellspacing='0'><tr>"),e.push("<td style='padding:0px 0px 0px 10px'>"+t+"'</td>"),e.push("<td style='padding:0px 0px 0px 10px'>"+o+"'</td>"),e.push("<td style='padding:0px 0px 0px 10px'>"+this.firstRow+"-"+this.lastRow+" / "+this.totalNumber+"</td>"),e.push("<td style='padding:0px 0px 0px 10px'>"+s+"'</td>"),e.push("<td style='padding:0px 0px 0px 10px'>"+i+"'</td>"),e.push("</tr></table>"),e.push("<td>"),e.push("<table border='0' cellpadding='0' cellspacing='0' style='margin-right:4px;margin-left:auto;'><tr><td></td>"),this.props.footerShowPageInfo&&e.push("<td style='padding:2px 0px 0px 0px;'><span>"+this.props.pageLable+" <b>"+this.pageNumber+"</b> "+this.props.ofLable+" <b>"+this.pageCount+"</b> / "+this.props.totalLable+" <b>"+this.totalNumber+"</b></span></td>"),this.props.footerShowGoPage){e.push("<td style='padding:2px 0px 0px 10px;'>"+this.props.gotoPageLable),e.push(" <select id='"+this.id+"_nmdrTB_goPageSelect' onchange=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'goToPage');\">"),e.push("<option value=''></option>");for(var r=1;r<=this.pageCount;r++)e.push("<option value='"+r+"'>"+r+"</option>");e.push("</select></td>")}this.props.footerShowRowCount&&(e.push("<td style='padding:2px 0px 0px 10px;'>"+this.props.rowCountLable),e.push(" <select id='"+this.id+"_nmdrTB_rowLimitSelect' onchange=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'setRowLimit');\">"),e.push("<option value='10' "+(10===this.props.rowLimit?"Selected":"")+">10</option>"),e.push("<option value='25' "+(25===this.props.rowLimit?"Selected":"")+">25</option>"),e.push("<option value='50' "+(50===this.props.rowLimit?"Selected":"")+">50</option>"),e.push("<option value='100' "+(100===this.props.rowLimit?"Selected":"")+">100</option>"),e.push("<option value='150' "+(150===this.props.rowLimit?"Selected":"")+">150</option>"),e.push("<option value='200' "+(200===this.props.rowLimit?"Selected":"")+">200</option>"),e.push("</select></td>")),e.push("</tr></table></td>")}else e.push("<td>This view contains no data.</td>");return e.push("</tr></table>"),e.join("")},e.configSize=function(){var e=this.getElementsByClassName("nmdrTB_table")[0];this.props.scrollable?this.style.width=e.offsetWidth+2+"px":e.style.width="100%"},e.updateTable=function(){this.getElementsByClassName("nmdrTB_content")[0].innerHTML=this.makeTable(),this.configSize()},e.copyToClipboard=function(e){var t=document.getElementsByTagName("body")[0],o=document.createElement("INPUT");t.appendChild(o),o.setAttribute("value",this.menuCommands[0].param),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),t.removeChild(o)},e.loadData=function(t,o){var s=this;this.showLoader(!0),window.setTimeout(function(){var e=s.prepareData();s.columns=e.columns.slice(0),-1!==s.props.menuColumn&&(s.props.menuColumn=Math.max(s.props.menuColumn,1),s.props.menuColumn=Math.min(s.props.menuColumn,s.columns.length)),s.menuCommands=-1!==s.props.menuColumn?s.prepareMenuCommands():[],s.props.rowLimit=Math.min(s.props.rowLimit,e.rows.length),s.props.clientHandling?((i=s).originRows=e.rows.slice(0),s.dataRows=s.filterList(),s.dataRows.sort(s.sortComparator)):s.dataRows=e.rows.slice(0),t&&(s.pageNumber=1,s.totalNumber=s.dataRows.length,s.firstRow=1,s.lastRow=s.props.rowLimit>s.totalNumber?s.totalNumber:s.props.rowLimit,s.pageCount=Math.ceil(s.totalNumber/s.props.rowLimit)),o?s.makeView():s.updateTable(),s.showLoader(!1)},10)},e.selectRows=function(e,t,o){if(!o||this.props.multiSelection){if(this.deselect(),o){var s=this.selectedRows.length;if(this.clickedRow=-1,this.selectedRows=[],s!=this.props.rowLimit)for(var i=this.firstRow;i<=this.lastRow;i++)this.selectedRows.push(i)}else{s=this.selectedRows.indexOf(t);if(this.props.multiSelection){if(e&&e.ctrlKey)-1==s?this.selectedRows.push(t):(this.selectedRows.splice(s,1),t=-1);else if(e&&e.shiftKey){if(t<this.selectedRows[0])for(i=t;i<this.selectedRows[0];i++)this.selectedRows.push(i);else if(t>this.selectedRows[this.selectedRows.length-1])for(var r=this.selectedRows[this.selectedRows.length-1],i=t;r<i;i--)this.selectedRows.push(i)}else-1==s||1<this.selectedRows.length?(this.selectedRows=[],this.selectedRows[0]=t):(this.selectedRows=[],t=-1);this.selectedRows.sort(function(e,t){return e-t})}else-1==s?this.selectedRows[0]=t:(this.selectedRows=[],t=-1);this.clickedRow=t}this.select(),this.selectionChanged()}},e.select=function(){var n=this;this.selectedRows.forEach(function(e,t){var o=document.getElementById(n.id+"_nmdrTB_body_tr"+e),s=o.getElementsByClassName("nmdrTB_body_td_se")[0],i=o.getElementsByClassName("nmdrTB_body_se")[0],r=o.getElementsByClassName("nmdrTB_body_td_cm")[0],e=o.getElementsByClassName("nmdrTB_body_cm")[0];o.classList.remove("nmdrTB_body_tr"),o.classList.add("nmdrTB_body_tr_sel"),s.classList.add("nmdrTB_body_td_se_sel"),i.classList.add("nmdrTB_body_se_sel"),r&&(r.classList.add("nmdrTB_body_td_cm_sel"),e.classList.add("nmdrTB_body_cm_sel"))})},e.deselect=function(){var n=this;this.selectedRows.forEach(function(e,t){var o=document.getElementById(n.id+"_nmdrTB_body_tr"+e),s=o.getElementsByClassName("nmdrTB_body_td_se")[0],i=o.getElementsByClassName("nmdrTB_body_se")[0],r=o.getElementsByClassName("nmdrTB_body_td_cm")[0],e=o.getElementsByClassName("nmdrTB_body_cm")[0];o.classList.remove("nmdrTB_body_tr_sel"),o.classList.add("nmdrTB_body_tr"),s.classList.remove("nmdrTB_body_td_se_sel"),i.classList.remove("nmdrTB_body_se_sel"),r&&(r.classList.remove("nmdrTB_body_td_cm_sel"),e.classList.remove("nmdrTB_body_cm_sel"))})},e.clearSelection=function(){this.clickedRow=-1,this.selectedRows=[],this.selectionChanged()},e.selectionChanged=function(){var e=this.getSelection();this.handleEvents(e),this.handlePostBack(e)},e.getSelection=function(){for(var e=[],t=0;t<this.selectedRows.length;t++){var o=this.dataRows[this.selectedRows[t]-1].split(this.props.dataSplitter);e.push(o[0])}return e},e.selectColumn=function(e,t){},e.resizeColumn=function(e,t,o){0==t?(this.props.pageX=e.pageX,this.props.curCol=document.getElementById(this.id+"_nmdrTB_header_th"+o),this.props.curColWidth=this.props.curCol.offsetWidth):3==t&&this.props.curCol?(e=e.pageX-this.props.pageX,this.props.curCol.style.width=this.props.curColWidth+e+"px"):4==t&&(this.props.pageX=void 0,this.props.curCol=void 0,this.props.curColWidth=void 0)},e.nextPage=function(){this.clearSelection(),this.pageNumber++,this.firstRow+=this.props.rowLimit,this.lastRow+=this.props.rowLimit,this.firstRow>this.totalNumber&&(this.firstRow=this.lastRow+1),this.lastRow>this.totalNumber&&(this.lastRow=this.totalNumber),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.prevPage=function(){this.pageNumber--,this.firstRow-=this.props.rowLimit,this.lastRow-=this.props.rowLimit,this.firstRow<1&&(this.firstRow=1),this.lastRow<this.firstRow+this.props.rowLimit&&(this.lastRow=this.firstRow+this.props.rowLimit-1),this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.firstPage=function(){this.pageNumber=1,this.firstRow=1,this.lastRow=this.props.rowLimit,this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.lastPage=function(){var e=this.totalNumber-(this.pageCount-1)*this.props.rowLimit;this.pageNumber=this.pageCount,this.firstRow=this.totalNumber-e,this.lastRow=this.totalNumber,this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.sortColumn=function(e){this.props.sortingColumn!=e&&(this.props.sortingDirection=null),this.props.sortingColumn=e,this.props.sortingDirection=null!=this.props.sortingDirection&&this.props.sortingDirection==this.SORT_DESCENDING?this.SORT_ASCENDING:this.SORT_DESCENDING,this.clearSelection(),this.doSort()},e.sortAZ=function(){this.props.sortingColumn=this.selectedColumn,this.props.sortingDirection=this.SORT_DESCENDING,this.clearSelection(),this.doSort()},e.sortZA=function(){this.props.sortingColumn=this.selectedColumn,this.props.sortingDirection=this.SORT_ASCENDING,this.clearSelection(),this.doSort()},e.removeSorting=function(){this.props.sortingColumn=-1,this.props.sortingDirection=null,this.clearSelection(),this.doSort()},e.doSort=function(){if(!this.props.clientHandling)return this.loadData(!1,!1);this.showLoader(!0);var e=this;window.setTimeout(function(){-1===e.props.sortingColumn?(e.dataRows=e.originRows.slice(0),e.doFilter()):(i=e).dataRows.sort(e.sortComparator),e.showLoader(!1),e.updateTable()},10)},e.sortComparator=function(e,t){var o=i;if(null==e&&null==t)return 0;if(null!=e&&null==t)return o.props.sortingDirection==o.SORT_DESCENDING?1:-1;if(null==e&&null!=t)return o.props.sortingDirection==o.SORT_DESCENDING?-1:1;e=e.split(o.props.dataSplitter),t=t.split(o.props.dataSplitter),e=e[o.props.sortingColumn],t=t[o.props.sortingColumn];return e==t?0:t<e?o.props.sortingDirection==o.SORT_DESCENDING?1:-1:o.props.sortingDirection==o.SORT_DESCENDING?-1:1},e.setFilter=function(){var e=this.props.filterSplitter,t=document.getElementById(this.id+"_nmdrTB_filterSelect").value,o=document.getElementById(this.id+"_nmdrTB_filterText").value,t=0<o.length?t+e+o:"",o=this.getFilterData();0<o.length&&(t+=0<t.length?t+e+o:e+e+o),0<t.length?(this.props.filters[this.selectedColumn]=t,this.clearSelection(),this.doFilter()):removeFilter()},e.removeFilter=function(){delete this.props.filters[this.selectedColumn],this.clearSelection(),this.doFilter()},e.doFilter=function(){if(!this.props.clientHandling)return this.loadData(!0,!1);this.showLoader(!0);var e=this;window.setTimeout(function(){e.dataRows=e.filterList(),e.pageNumber=1,e.totalNumber=e.dataRows.length,e.firstRow=0<e.dataRows.length?1:0,e.lastRow=e.props.rowLimit<e.totalNumber?e.props.rowLimit:e.totalNumber,e.pageCount=Math.ceil(e.totalNumber/e.props.rowLimit),e.showLoader(!1),e.updateTable()},10)},e.filterList=function(){var e=this.originRows.slice(0);if(0<Object.keys(this.props.filters).length)for(var t=e[0].split(this.props.dataSplitter),o=0;o<t.length;o++)e=this.doFilterList(e,o);return-1!==this.props.sortingColumn&&(i=this,e.sort(this.sortComparator)),e},e.doFilterList=function(e,t){var o,s=[];for(o in e){var i=e[o],r=i.split(this.props.dataSplitter),n=!0;if(this.props.filters[t]){var l=r[t],d=this.props.filters[t].split(this.props.filterSplitter);if(d[2]&&0<d[2].length){n=!1;var a,h=d[2].split(this.props.filterDataSplitter);for(a in h)if(l==h[a]){n=!0;break}}switch(d[0]){case"isequal":n&=l===d[1];break;case"isnotequal":n&=l!==d[1];break;case"contains":n&=-1!==l.indexOf(d[1]);break;case"notcontains":n&=-1==l.indexOf(d[1]);break;case"startswith":n&=0==l.indexOf(d[1]);break;case"endswith":n&=-1!==l.indexOf(d[1],l.length-d[1].length)}}n&&s.push(i)}return s},e.setRowLimit=function(){var e=document.getElementById(this.id+"_nmdrTB_rowLimitSelect").value;this.props.rowLimit=parseInt(e),this.props.clientHandling?(this.pageNumber=1,this.firstRow=0<this.dataRows.length?1:0,this.lastRow=this.props.rowLimit<this.totalNumber?this.props.rowLimit:this.totalNumber,this.pageCount=Math.ceil(this.totalNumber/this.props.rowLimit),this.clearSelection(),this.updateTable()):this.loadData(!0,!1)},e.goToPage=function(){var e=document.getElementById(this.id+"_nmdrTB_goPageSelect").value;e.length&&(this.pageNumber=parseInt(e),this.props.clientHandling?(this.firstRow=(this.pageNumber-1)*this.props.rowLimit+1,this.lastRow=this.firstRow+this.props.rowLimit-1,this.lastRow>this.totalNumber&&(this.lastRow=this.totalNumber),this.clearSelection(),this.updateTable()):this.loadData(!1,!1))},e.openHeaderMenu=function(e,t){var o=this,s=t.id.substring(t.id.indexOf("_hdm")+4),i=document.getElementById(this.id+"_nmdrTB_header_th"+s),r=this.getElementsByClassName("nmdrTB_headerMenu")[0],n=this.absPosition,i=i.absPosition;nmdr.core.utils.stopPropagation(e),i.left+r.offsetWidth>n.left+this.offsetWidth&&(i.left=n.left+this.offsetWidth-r.offsetWidth),r.style.display="inline-block",r.style.position="absolute",r.style.left=i.left-n.left+"px",r.style.top=i.top-n.top+(this.props.headerHeight+8)+"px",nmdr.core.popup.open(r,t,function(){nmdr.core.animate.fadeIn(null,r,null,!0,function(){o.headerMenuOpen=!0})},function(e){o.closeHeaderMenu(null,o,e)}),document.getElementById(this.id+"_nmdrTB_filterColumnName").text=this.columns[s],this.selectedColumnOld=this.selectedColumn,this.selectedColumn=parseInt(s),document.getElementById(this.id+"_nmdrTB_filterSelect").innerHTML=this.prepareFilterPattern(!1),document.getElementById(this.id+"_nmdrTB_filterText").value=this.prepareFilterPattern(!0),this.props.showFilterData&&(document.getElementById(this.id+"_nmdrTB_filterData").innerHTML=this.prepareFilterData()),-1!=this.selectedColumnOld&&(document.getElementById(this.id+"_nmdrTB_header_th"+this.selectedColumnOld).style.opacity=1)},e.closeHeaderMenu=function(e,t,o){null==t&&(t=this);var s=t.getElementsByClassName("nmdrTB_headerMenu")[0];nmdr.core.animate.fadeOut(null,s,null,!0,function(){s.style.display="none",document.getElementById(t.id+"_nmdrTB_header_th"+t.selectedColumn).style.opacity=1,t.headerMenuOpen=!1,e&&t.handleCommand(null,e),t.selectedColumn=-1,t.selectedColumnOld=-1,o&&o()}),nmdr.core.popup.close()},e.openRowMenu=function(e,t,o){for(var s in this.menuCommands)this.menuCommands[s].targetRow=t,this.menuCommands[s].param=o?o.getAttribute("param"):"",0==s&&(this.menuCommands[s].enabled=null!=o);this.makeRowMenu(!1,o);var i=this,r=o||document.getElementById(this.id+"_nmdrTB_body_tr"+t).getElementsByClassName("nmdrTB_body_cm")[0],n=this.getElementsByClassName("nmdrTB_rowMenu")[0],l=this.absPosition,d=r.absPosition;d.left+n.offsetWidth>l.left+this.offsetWidth&&(d.left=this.offsetWidth-n.offsetWidth),n.style.display="inline-block",n.style.position="absolute",n.style.left=d.left-l.left+"px",n.style.top=d.top-l.top+(o?20:14)+"px",nmdr.core.popup.open(n,r,function(){nmdr.core.animate.fadeIn(null,n,null,!0,function(){i.rowMenuOpen=!0})},function(e){i.closeRowMenu("clear",null,i,e)}),(this.clickedRow==t||1<this.selectedRows.length&&-1!=this.selectedRows.indexOf(t))&&nmdr.core.utils.stopPropagation(e)},e.closeRowMenu=function(e,t,o,s){null==o&&(o=this);var i=o.getElementsByClassName("nmdrTB_rowMenu")[0];nmdr.core.animate.fadeOut(null,i,null,!0,function(){i.style.display="none",o.updateRowMenuRow(!1),o.rowMenuOpen=!1,o.rowMenuActRow=-1,e&&o.handleCommand(null,e),t&&t.action(t.targetRow),s&&s()}),nmdr.core.popup.close()},e.updateRowMenuRow=function(e){var t;-1!=this.rowMenuActRow&&(t=document.getElementById(this.id+"_nmdrTB_rowMenu_tr_"+this.rowMenuActRow),e?t.classList.add("rowMenuActRow"):t.classList.remove("rowMenuActRow"))},e.onRowMenuMouseOver=function(e){this.updateRowMenuRow(!1),this.rowMenuActRow},e.selectHeader=function(e,t){var o=document.getElementById(this.id+"_nmdrTB_header_th"+e),s=document.getElementById(this.id+"_nmdrTB_hdm"+e);o.style.opacity=e==this.selectedColumn?.5:1,s&&(s.style.visibility=t?"visible":"hidden")},e.initEvents=function(){var s=this;document.getElementById(this.id).oncontextmenu=this.rightClick,this.props.columnsResizable&&(document.addEventListener("mousemove",function(e){s.resizeColumn(e,3)}),document.addEventListener("mouseup",function(e){s.resizeColumn(e,4)})),document.addEventListener("keydown",function(e){var t,o;nmdr.core.utils.isActiveElement(s)&&(40==e.keyCode?(s.rowMenuOpen?(-1!=s.rowMenuActRow?(s.updateRowMenuRow(!1),s.rowMenuActRow==s.menuCommands.length-1?s.rowMenuActRow=0:s.rowMenuActRow++):s.rowMenuActRow=0,s.updateRowMenuRow(!0)):(t=0==s.selectedRows.length?0:s.selectedRows[0],s.props.scrollable?(o=s.getElementsByClassName("nmdrTB_body")[0],t<s.lastRow&&(o.scrollTop+=s.props.bodyRowHeight+7,s.selectRows(null,t+1))):s.selectRows(null,t==s.lastRow?s.firstRow:t+1)),nmdr.core.utils.stopPropagation(e)):38==e.keyCode?(s.rowMenuOpen?(-1!=s.rowMenuActRow?(s.updateRowMenuRow(!1),0==s.rowMenuActRow?s.rowMenuActRow=s.menuCommands.length-1:s.rowMenuActRow--):s.rowMenuActRow=0,s.updateRowMenuRow(!0)):(t=0==s.selectedRows.length?0:s.selectedRows[0],s.props.scrollable?(o=s.getElementsByClassName("nmdrTB_body")[0],t>s.firstRow&&(o.scrollTop-=s.props.bodyRowHeight+7,s.selectRows(null,t-1))):s.selectRows(null,t==s.firstRow?s.lastRow:t-1)),nmdr.core.utils.stopPropagation(e)):33==e.keyCode||34==e.keyCode?nmdr.core.utils.stopPropagation(e):13==e.keyCode&&(s.rowMenuOpen?s.executeMenuCommand(s.rowMenuActRow):-1!=s.props.menuColumn&&s.openRowMenu(e,s.selectedRows[0]),nmdr.core.utils.stopPropagation(e)))})},e.rightClick=function(e){e.preventDefault();var t=window.pageXOffset||0,o=window.pageYOffset||0,t=document.elementFromPoint(e.pageX-t,e.pageY-o);!t||-1==t.id.indexOf("nmdrTB_body_td_")||2==(o=t.id.substr(t.id.lastIndexOf("_")+1).split("x")).length&&(this.selectRows(e,o[0]),this.openRowMenu(e,o[0],t))},e.showLoader=function(e){var t=this.getElementsByClassName("nmdrTB_loader")[0];t&&(t.style.display=e?"inline":"none",t.style.cursor=e?"wait":"default")},e.handleCommand=function(e,t,o,s){if(!this.headerMenuOpen||s)if(!this.rowMenuOpen||s)switch(e&&nmdr.core.utils.stopPropagation(e),o&&this.selectRows(e,o),t){case"selectAll":this.selectRows(null,null,!0);break;case"nextPage":this.nextPage();break;case"prevPage":this.prevPage();break;case"firstPage":this.firstPage();break;case"lastPage":this.lastPage();break;case"sortAZ":this.sortAZ();break;case"sortZA":this.sortZA();break;case"removeSorting":this.removeSorting();break;case"setFilter":this.setFilter();break;case"removeFilter":this.removeFilter();break;case"checkAllFilter":this.checkAllFilterCheckBox();break;case"uncheckAllFilter":this.uncheckAllFilterCheckBox();break;case"setRowLimit":this.setRowLimit();break;case"goToPage":this.goToPage();break;case"openRow":this.openRow(o);break;case"editRow":this.editRow(o);break;case"deleteRow":this.deleteRow(o);break;case"renameRow":break;case"copyContent":this.copyToClipboard(o)}else this.closeRowMenu(t);else this.closeHeaderMenu(t)},e.executeMenuCommand=function(e){this.closeRowMenu("clear",this.menuCommands[e])},e.handlePostBack=function(e){this.props.doPostBack},e.makeRowMenu=function(e,t){if(e)return"<div class='nmdrTB_rowMenu' id='"+this.id+"_nmdrTB_rowMenu'></div>";var o=[];o.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%'>");for(var s=0;s<this.menuCommands.length;s++){var i=this.menuCommands[s];o.push("<tr class='nmdrTB_rowMenu_tr' id='"+this.id+"_nmdrTB_rowMenu_tr_"+s+"' "),o.push(i.enabled?"onclick=\"nmdr.core.$('"+this.id+"').executeMenuCommand("+s+');" ':" "),o.push("onmouseover=\"nmdr.core.$('"+this.id+"').onRowMenuMouseOver(event);\">"),o.push("<td style='opacity:"+(i.enabled?"1":"0.2")+";width:24px;'><img src='"+this.props.imagePath+i.icon+"'></td>"),o.push("<td style='opacity:"+(i.enabled?"1":"0.2")+";'><span>"+i.name+"</span></td></tr>")}o.push("</table>"),document.getElementById(this.id+"_nmdrTB_rowMenu").innerHTML=o.join("")},e.makeHeaderMenu=function(){var e=[];return e.push("<div class='nmdrTB_headerMenu'>"),e.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%' style='table-layout:fixed'>"),e.push("<tr>"),e.push("<td>"),e.push("<a href='#'><img src='"+this.props.imagePath+"spDoSortAZ.gif' style='border-style:none;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'sortAZ');\" style='text-decoration:none;'>A-Z</a>"),e.push("</td>"),e.push("<td>"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event);\">"),e.push("<img src='"+this.props.imagePath+"spClosePopup.gif' style='border-style:none; vertical-align:middle;float:right;'/></a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push("<td colspan='2'>"),e.push("<a href='#'><img src='"+this.props.imagePath+"spDoSortZA.gif' style='border-style:none;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'sortZA');\" style='text-decoration:none;'>Z-A</a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push("<td colspan='2'>"),e.push("<a href='#'><img src='"+this.props.imagePath+"spSortdel.gif' style='border-style:none;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'removeSorting');\" style='text-decoration:none;'>"+this.props.removeSortingLable+"</a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr style='height:5px'><td colspan='2'></td></tr>"),e.push("<tr><td colspan='2' style='border-bottom:dotted; border-bottom-width:1px;'></td></tr>"),e.push("<tr style='height:5px'><td colspan='2'></td></tr>"),e.push("<tr>"),e.push("<td colspan='2'>"),e.push("<a href='#'><img src='"+this.props.imagePath+"spFilterdel.gif' style='border-style:none;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'removeFilter');\" style='text-decoration:none;'>"+this.props.removeFilterLable+"&nbsp;&nbsp;</a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push("<td colspan='2'>"),e.push("<a href='#'><img src='"+this.props.imagePath+"spFilter.png' style='border-style:none;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'setFilter');\" style='text-decoration:none;'>"+this.props.setFilterLable+"&nbsp;&nbsp;</a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push("<td colspan='2'>"),e.push("<table border='0' width='100%'>"),e.push("<tr>"),e.push("<td><span id='"+this.id+"_nmdrTB_filterColumnName'>Column</span></td>"),e.push("<td><select id='"+this.id+"_nmdrTB_filterSelect'>"+this.prepareFilterPattern(!1)+" style='width:100%'</select></td>"),e.push("<td style='width:100%;'><input id='"+this.id+"_nmdrTB_filterText' type='text' name='columnfilter' value='"+this.prepareFilterPattern(!0)+"' style='width:100%;padding:0px;'/></td>"),this.props.showFilterData?(e.push("</tr>"),e.push("<tr><td>Selection</td>"),e.push("<td colspan='2' style='text-align:right'>"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'uncheckAllFilter', null, true);\">"),e.push("<img src='"+this.props.imagePath+"spUncheckAll.gif' style='border-style:none; vertical-align:middle;'/></a>&nbsp;"),e.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'checkAllFilter', null, true);\">"),e.push("<img src='"+this.props.imagePath+"spCheckAll.gif' style='border-style:none; vertical-align:middle;'/></a>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push("<td colspan='3'>"),e.push("<div id='"+this.id+"_nmdrTB_filterData' style='display:block;width:100%;height:108px;background:#fff;border:1px solid #ccc;overflow-x:hidden;overflow-y:auto;'>"),e.push(this.prepareFilterData()),e.push("</div>"),e.push("</td>")):(e.push("<td style='width:16px;'><a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'setFilter');\">"),e.push("<img src='"+this.props.imagePath+"spFilterset.gif' style='border-style:none; vertical-align:middle;'/></a></td>")),e.push("</tr>"),e.push("</table>"),e.push("</td>"),e.push("</tr>"),e.push("</table>"),e.push("</div>"),e.join("")},e.prepareMenuCommands=function(){var t=this;return[{name:"copy content",icon:"copyitem.gif",enabled:!1,targetRow:0,param:"",action:function(e){t.handleCommand(null,"copyContent",e)}},{name:"open item",icon:"details.gif",enabled:!0,targetRow:0,param:"",action:function(e){t.handleCommand(null,"openRow",e)}},{name:"edit item",icon:"editdetails.gif",enabled:!0,targetRow:0,param:"",action:function(e){t.handleCommand(null,"editRow",e)}},{name:"delete item",icon:"delete.gif",enabled:!0,targetRow:0,param:"",action:function(e){t.handleCommand(null,"deleteRow",e)}},{name:"rename item",icon:"edititem.gif",enabled:!0,targetRow:0,param:"",action:function(e){t.handleCommand(null,"renameRow",e)}}]},e.prepareFilterPattern=function(e){var t=this.props.filters[this.selectedColumn]?this.props.filters[this.selectedColumn].split(this.props.filterSplitter):null;if(e)return t?t[1]:"";var o,s="",i=t?t[0]:"";for(o in this.props.patternNames){var r=this.props.patternNames[o].split("/");switch(r[0]){case"is equal":s+="<option value='isequal' "+("isequal"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>";break;case"is not equal":s+="<option value='isnotequal' "+("isnotequal"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>";break;case"contains":s+="<option value='contains' "+("contains"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>";break;case"not contains":s+="<option value='notcontains' "+("notcontains"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>";break;case"starts with":s+="<option value='startswith' "+("startswith"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>";break;case"ends with":s+="<option value='endswith' "+("endswith"==i?"selected":"")+">"+("x"==r[1]?r[0]:r[1])+"</option>"}}return s},e.prepareFilterData=function(){if(-1==this.selectedColumn)return"";var e=[],t=[],o=[];for(i in this.originRows){var s=this.originRows[i].split(this.props.dataSplitter);e.push(s[this.selectedColumn])}this.props.filters[this.selectedColumn]&&(t=2<(t=this.props.filters[this.selectedColumn].split(this.props.filterSplitter)).length?t[2].split(this.props.filterDataSplitter):null),o.push("<table width='100%' height='100%' cellpadding='0' cellspacing='0' border='0'>");for(var i=0;i<e.length;i++){var r=!1;if(t&&0<t.length)for(var n in t)if(t[n]==e[i]){r=!0;break}var l=this.id+"_nmdrTB_FCBox"+i,d=this.props.imagePath+(r?"/checkboxon.png":"/checkboxoff.png");o.push("<tr style='line-height:18px;'><td class='nmdrTBFcheckbox' id='"+l+"' onclick=\"nmdr.core.$('"+this.id+"').toggleFilterCheckBox("+i+");\"><table cellpadding='2' cellspacing='0' border='0'><tr><td style='vertical-align:middle;'><img class='nmdrTBCB' id='"+l+"_img' name='"+e[i]+"' checked='"+r+"' src='"+d+"'></td><td style='vertical-align:middle;'><span>"+e[i]+"</span></td></tr></table></td></tr>")}return o.push("</table>"),o.join("")},e.toggleFilterCheckBox=function(e){var t=document.getElementById(this.id+"_nmdrTB_FCBox"+e+"_img"),o="true"!=t.getAttribute("checked"),e=this.props.imagePath+(o?"/checkboxon.png":"/checkboxoff.png");t.setAttribute("checked",o),t.src=e},e.checkAllFilterCheckBox=function(){for(var e=document.getElementById(this.id+"_nmdrTB_filterData").getElementsByClassName("nmdrTBCB"),t=0;t<e.length;t++)e[t].src=this.props.imagePath+"/checkboxon.png",e[t].setAttribute("checked","true")},e.uncheckAllFilterCheckBox=function(){for(var e=document.getElementById(this.id+"_nmdrTB_filterData").getElementsByClassName("nmdrTBCB"),t=0;t<e.length;t++)e[t].src=this.props.imagePath+"/checkboxoff.png",e[t].setAttribute("checked","false")},e.getFilterData=function(){if(!this.props.showFilterData)return"";for(var e=document.getElementById(this.id+"_nmdrTB_filterData").getElementsByClassName("nmdrTBCB"),t="",o=0;o<e.length;o++)"true"==e[o].getAttribute("checked")&&(t+=(""==t?"":this.props.filterDataSplitter)+e[o].getAttribute("name"));return t},e.prepareData=function(){for(var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t=this.props.dataSplitter,o=[],s=[],i=0;i<this.props.dummyRows;i++){for(var r="",n=0;n<this.props.dummyCols;n++)n<e.length&&(0==i&&o.push(e[n]),r+=e[n]+i,n<this.props.dummyCols-1&&(r+=t));s.push(r)}return{columns:o,rows:s}},e}}