function nmdrTable(t){var e=nmdr.core.$(t,"nmdrTable");if(null!=e){var o=null;return e.columns=[],e.dataRows=[],e.originRows=[],e.selectedRows=[],e.menuCommands=[],e.selectedColumn=-1,e.selectedColumnOld=-1,e.pageNumber=1,e.pageCount=0,e.totalNumber=0,e.firstRow=0,e.lastRow=0,e.clickedRow=-1,e.rowMenuActRow=-1,e.headerMenuOpen=!1,e.rowMenuOpen=!1,e.SORT_ASCENDING="SortZA",e.SORT_DESCENDING="SortAZ",e.props={imagePath:"img/",rowLimit:10,sortingColumn:-1,sortingDirection:null,filters:{},customQuery:null,dataSplitter:",",filterSplitter:"&",menuColumn:-1,clientHandling:!0,doPostBack:!1,multiSelection:!1,showRowCommands:!1,showHeader:!1,showFooter:!1,showBorder:!0,showGrids:!0,showShadow:!1,scrollable:!1,scrollable2:!1,dummyCols:6,dummyRows:6,lang:"en",patternNames:"",removeFilterLable:"",removeSortingLable:"",pageLable:"",ofLable:"",totalLable:"",rowCountLable:"",gotoPageLable:"",color:"#000000",background:"#ffffff",borderColor:"#e0e0e0",borderWidth:"1px",fontFamily:"Arial, Helvetica, sans-serif",fontWidth:"normal",fontSize:"13px",checkSelectionColor:"rgb(0,113,198)",menuCellBackground:"rgb(156, 206, 240)",selcolumnWidth:20,menucolumnWidth:24,headerHeight:24,headerPadding:3,headerWhiteSpace:"nowrap",headerTextOverflow:"ellipsis",headerColor:"#000",headerBackground:"rgb(248, 248, 248)",headerFontFamily:"Arial, Helvetica, sans-serif",headerFontWidth:"bold",headerFontSize:"13px",headerSelectionColor:"rgba(156, 206, 240, 0.5)",headerHOverColor:"#000",headerHOverBackColor:"rgba(205,230,247,0.5)",bodyRowHeight:24,bodyPadding:3,bodyWhiteSpace:"nowrap",bodyTextOverflow:"ellipsis",bodySelectionColor:"#000",bodySelectionBackColor:"rgba(156, 206, 240, 0.5)",bodyHOverColor:"#000",bodyHOverBackColor:"rgba(205,230,247,0.5)",bodyAlternateColor:"rgba(242,246,252,0.5)",footerHeight:42,footerColor:"#000000",footerBackColor:"rgb(248, 248, 248)",footerFontFamily:"Arial, Helvetica, sans-serif",footerFontWidth:"normal",footerFontSize:"12px",footerShowPager:!0,footerShowGoPage:!0,footerShowRowCount:!0,footerShowPageInfo:!0},e.init=function(t){t=t||{},this.props=nmdr.core.utils.mergeProperties(this.props,t),this.localization(),this.loadData(!0,!0)},e.localization=function(){"en"===this.props.lang?(this.props.patternNames=["is equal/x","is not equal/x","contains/x","not contains/x","starts with/x","ends with/x"],this.props.removeFilterLable="Remove Filter",this.props.removeSortingLable="Remove Sorting",this.props.pageLable="Page",this.props.ofLable="of",this.props.totalLable="Total",this.props.rowCountLable="Row count",this.props.gotoPageLable="Go to page"):"de"===this.props.lang?(this.props.patternNames=["is equal/ist gleich","is not equal/ist nicht gleich","contains/enthält","not contains/enthält nicht","starts with/beginnt mit","ends with/endet mit"],this.props.removeFilterLable="Filter löschen",this.props.removeSortingLable="Sortierung löschen",this.props.pageLable="Seite",this.props.ofLable="von",this.props.totalLable="Total",this.props.rowCountLable="Anzahl Zeilen",this.props.gotoPageLable="Gehe zur Seite"):"fr"===this.props.lang?(this.props.patternNames=["is equal/est le même","is not equal/n'est pas égal","contains/contient","not contains/ne contient pas","starts with/commence par","ends with/se termine par"],this.props.removeFilterLable="Supprimer le filtre",this.props.removeSortingLable="Supprimer le tri",this.props.pageLable="Page",this.props.ofLable="de",this.props.totalLable="Totalement",this.props.rowCountLable="Nombre de lignes",this.props.gotoPageLable="Aller à la page"):"es"===this.props.lang&&(this.props.patternNames=["is equal/es lo mismo","is not equal/no es igual","contains/contiene","not contains/no contiene","starts with/comienza con","ends with/termina con"],this.props.removeFilterLable="Eliminar filtro",this.props.removeSortingLable="Eliminar clasificación",this.props.pageLable="Página",this.props.ofLable="de",this.props.totalLable="Total",this.props.rowCountLable="Numero de lineas",this.props.gotoPageLable="Ir a la página")},e.renderHeaderCell=function(t,e){return null},e.renderBodyCell=function(t,e,o,s){return null},e.getColumnWidth=function(t){return null},e.handleEvents=function(t){},e.openRow=function(t){alert("open row: "+t)},e.editRow=function(t){alert("edit row: "+t)},e.deleteRow=function(t){alert("delete row: "+t)},e.makeView=function(){var t=[],e=this.props,o="#"+this.id,s="<style type='text/css'>"+o+" { position: relative !important; width: 100%; height: 100%; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -o-box-sizing: border-box;}"+o+" .nmdrTB_content { overflow: hidden; color:"+e.color+"; background:"+e.background+"; font-family: "+e.fontFamily+"; font-weight: "+e.fontWidth+"; font-size: "+e.fontSize+"; border-width:"+(e.showBorder?e.borderWidth:"0px")+"; border-color:"+e.borderColor+"; border-style: solid; cursor: default; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none;  user-select: none;"+(e.showShadow?"box-shadow:3px 3px 3px #ccc;":"")+"}"+o+" .nmdrTB_table { border-collapse: collapse; }"+o+" .nmdrTB_table td.nmdrTB_body_td { vertical-align: middle; }"+o+" .nmdrTB_table img { vertical-align: middle; cursor: pointer; }"+o+" .nmdrTB_header { background: "+e.headerSelectionColor+"; height: "+e.headerHeight+"px; }"+o+" .nmdrTB_header_tr {}"+o+" .nmdrTB_header_th { height: "+e.headerHeight+"px; color: "+e.headerColor+"; background: linear-gradient(#eee, "+e.headerBackground+"); font-family: "+e.headerFontFamily+"; font-weight: "+e.headerFontWidth+"; font-size: "+e.headerFontSize+"; border-bottom-width:"+(e.showBorder||e.showGrids?e.borderWidth:"0px")+"; border-bottom-color:"+e.borderColor+"; border-bottom-style: solid; padding: "+e.headerPadding+"px; padding-top: "+(e.headerPadding+1)+"px; text-align: left; white-space: "+e.headerWhiteSpace+"; text-overflow: "+e.headerTextOverflow+"; overflow: hidden;}"+o+" .nmdrTB_header_tr th.nmdrTB_header_th:not(:first-child) {  border-left: "+(e.showGrids?e.borderWidth:"0px")+" solid "+e.borderColor+";}"+o+" .nmdrTB_header_th:hover { color: "+e.headerHOverColor+"; background: "+e.headerHOverBackColor+"; transition:all 0.5s ease-in-out;}"+o+" .nmdrTB_header_th_sp:hover { cursor: pointer; }"+o+" .nmdrTB_header_th_se { width:"+e.selcolumnWidth+"px; text-align:center; }"+o+" .nmdrTB_header_th_cm { width:"+e.menucolumnWidth+"px; text-align:center; }"+o+" .nmdrTB_header_th_cm img { opacity: 0.3; }"+o+" .nmdrTB_body_tr { height: "+e.bodyRowHeight+"px; }"+o+" .nmdrTB_body_td { height: "+e.bodyRowHeight+"px; padding: "+e.bodyPadding+"px; white-space: "+e.bodyWhiteSpace+"; text-overflow: "+e.bodyTextOverflow+"; overflow: hidden;}"+o+" .nmdrTB_body_tr:nth-child(even) { background: "+e.bodyAlternateColor+"; }"+o+" .nmdrTB_body_tr:nth-child(odd) { background: "+e.background+"}"+o+" .nmdrTB_body_tr:hover { color: "+e.bodyHOverColor+"; background: "+e.bodyHOverBackColor+"; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td:first-child { background: "+e.bodyHOverBackColor+"; }"+o+" .nmdrTB_body_tr td.nmdrTB_body_td:not(:first-child) { border-left: "+(e.showGrids?e.borderWidth:"0px")+" solid "+e.borderColor+";}"+o+" .nmdrTB_body_tr td.nmdrTB_body_td { border-bottom: "+(e.showGrids?e.borderWidth:"0px")+" solid "+e.borderColor+";}"+o+" .nmdrTB_body_tr td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: hidden; float:right; }"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: hidden; float:right; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: visible; opacity: 0.3; }"+o+" .nmdrTB_body_tr:hover td.nmdrTB_body_td:first-child img:first-of-type { visibility: visible; }"+o+" .nmdrTB_body_tr:hover .nmdrTB_body_cm { visibility: visible; opacity: 0.3; }"+o+" .nmdrTB_body_tr_sel { color: "+e.bodySelectionColor+"; background: "+e.bodySelectionBackColor+"; }"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td:not(:first-child) { border-left: "+(e.showGrids?e.borderWidth:"0px")+" solid "+e.borderColor+";}"+o+" .nmdrTB_body_tr_sel td.nmdrTB_body_td { border-bottom: "+(e.showGrids?e.borderWidth:"0px")+" solid "+e.borderColor+";}"+o+" .nmdrTB_body_tr_sel:hover td.nmdrTB_body_td a.nmdrTB_rowcontrol { visibility: visible !important; opacity: 1 !important;}"+o+" .nmdrTB_body_td_se { width:"+e.selcolumnWidth+"px; min-width:"+e.selcolumnWidth+"px; max-width:"+e.selcolumnWidth+"px; text-align:center;}"+o+" .nmdrTB_body_td_se_sel { background: "+e.checkSelectionColor+"; }"+o+" .nmdrTB_body_se { visibility: hidden; }"+o+" .nmdrTB_body_se_sel { visibility: visible; }"+o+" .nmdrTB_body_td_cm { width:"+e.menucolumnWidth+"px; min-width:"+e.menucolumnWidth+"px; max-width:"+e.menucolumnWidth+"px; text-align:center;}"+o+" .nmdrTB_body_td_cm_sel { background: "+e.menuCellBackground+"; }"+o+" .nmdrTB_body_cm { visibility: hidden; }"+o+" .nmdrTB_body_cm_sel { visibility: visible; }"+o+" .nmdrTB_footer {}"+o+" .nmdrTB_footer_tr {}"+o+" .nmdrTB_footer_td { padding: 0px; }"+o+" .nmdrTB_footer_div { width: 100%; height: "+e.footerHeight+"px; color: "+e.footerColor+"; background: linear-gradient(#eee, "+e.footerBackColor+"); font-family: "+e.footerFontFamily+"; font-weight: "+e.footerFontWidth+"; font-size: "+e.footerFontSize+"; border-top-width: "+(e.showBorder&&!e.showGrids?e.borderWidth:e.scrollable?"1px":"0px")+"; border-top-color: "+e.borderColor+"; border-top-style: solid;}"+o+" .nmdrTB_headerMenu { display: none; background-color: white; border: 1px solid #bbb; padding:10px; line-height: 22px; font-family: arial,verdana,sans-serif; font-weight: normal; font-size:12px; z-index: 999; box-shadow:5px 5px 5px #ddd; transition:all 0.5s ease-in-out;}"+o+" .nmdrTB_rowMenu { display: none; background-color: white; border: 1px solid #bbb; padding: 5px; width: 200px; line-height: 22px; font-family: arial,verdana,sans-serif; font-weight: normal; font-size:12px; z-index: 999; box-shadow:5px 5px 5px #ddd; transition:all 0.5s ease-in-out;}"+o+" .nmdrTB_rowMenu img { vertical-align: middle; }"+o+" .nmdrTB_rowMenu_tr { height:28px; }"+o+" .rowMenuActRow, .nmdrTB_rowMenu_tr:hover {  background: "+e.bodyHOverBackColor+" !important;  cursor: pointer;}"+o+' .nmdrTB_loader { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; display: none; cursor: wait; z-index: 999; background:#ffffff url("'+e.imagePath+'spLoader.gif") no-repeat center center; opacity: 0.75; filter: alpha(opacity=75);}'+(e.scrollable?o+" .nmdrTB_header_tr { display: block; }"+o+" .nmdrTB_body { display: block; overflow-y: scroll; overflow-x:hidden; height: "+(this.offsetHeight-e.headerHeight-e.footerHeight)+"px; }":o+" .nmdrTB_content {"+(e.scrollable2?"position:absolute; left:0px; top:0px; width:100%; height:100%; overflow-y:scroll;}":"}"))+"</style>";t.push(s),t.push("<script type='text/javascript'>(function() { })();<\/script>"),t.push(this.makeRowMenu()),t.push(this.makeHeaderMenu()),t.push(this.makeContent()),document.getElementById(this.id).innerHTML=t.join(""),this.configSize(),this.initKeyEvents()},e.makeContent=function(){var t=[];return t.push("<div class='nmdrTB_loader'></div>"),t.push("<div class='nmdrTB_content' tabindex='1'>"),t.push(this.makeTable()),t.push("</div>"),t.join("")},e.makeTable=function(){var t=[];return t.push("<table class='nmdrTB_table' border='0' cellpadding='0' cellspacing='0' onselectstart='return false' ondragstart='return false'>"),t.push(this.makeHeader()),t.push(this.makeBody()),t.push(this.makeFooter()),t.push("</table>"),t.join("")},e.makeHeader=function(){if(!this.props.showHeader)return"";var t=0,e=[];e.push("<thead class='nmdrTB_header'>"),e.push("<tr class='nmdrTB_header_tr'>");for(var o=0;o<this.columns.length;o++){0==o&&(e.push("<th class='nmdrTB_header_th nmdrTB_header_th_se'><img src='"+this.props.imagePath+"spCheck.png' "),e.push("onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'selectAll');\"></th>"),t+=this.props.selcolumnWidth),o+1==this.props.menuColumn&&(e.push("<th class='nmdrTB_header_th nmdrTB_header_th_cm'><img src='"+this.props.imagePath+"spCMenu.gif'></th>"),t+=this.props.menucolumnWidth);var s=this.getColumnWidth(o),i=this.props.sortingColumn==o?"<img src='"+this.props.imagePath+"sp"+this.props.sortingDirection+".png'":"",r=null!=this.props.filters[o]?"<img src='"+this.props.imagePath+"spFilter.png'>":"",n=this.renderHeaderCell(o,this.columns[o]);e.push("<th class='nmdrTB_header_th' id='"+this.id+"_nmdrTB_header_th"+o+"' "),e.push(s?"style='width:"+s+"px; min-width:"+s+"px; max-width:"+s+"px;'":""),e.push("onmouseOver=\"nmdr.core.$('"+this.id+"').selectHeader("+o+', true);" '),e.push("onmouseOut=\"nmdr.core.$('"+this.id+"').selectHeader("+o+', false);" '),e.push("onclick=\"nmdr.core.$('"+this.id+"').selectColumn(event, "+o+');">'),e.push("<table width=100% border='0' cellpadding='0' cellspacing='0'><tr>"),e.push("<td style='padding:0px 0px 0px 0px;'><table border='0' cellpadding='0' cellspacing='0'><tr>"),e.push("<td style='padding:0px 0px 0px 0px;'><span class='nmdrTB_header_th_sp' onClick=\"nmdr.core.$('"+this.id+"').sortColumn("+o+');">'+(n||this.columns[o])+"</span></td>"),e.push("<td style='width:20px; padding:0px 0px 0px 4px;'>"+i+"</td>"),e.push("<td style='width:16px; padding:0px 0px 0px 0px;'>"+r+"</td></tr></table></td>"),e.push("<td style='width:16px; padding:0px 4px 0px 0px; float:right;'>"),e.push("<img id='"+this.id+"_nmdrTB_hdm"+o+"' src='"+this.props.imagePath+"spMenu.png' "),e.push("onclick=\"nmdr.core.$('"+this.id+"').openHeaderMenu(event, this);\" style='visibility:hidden'></td>"),e.push("</tr></table></th>"),t+=s||0}return e.push("</tr></thead>"),e.join("")},e.makeBody=function(){var t=[];if(t.push("<tbody class='nmdrTB_body'>"),this.dataRows.length>0)for(var e=this.props.clientHandling?this.firstRow:1,o=this.props.clientHandling?this.lastRow:this.props.rowLimit>this.totalNumber?this.totalNumber:this.props.rowLimit,s=e;s<=o;s++){var i=this.dataRows[s-1].split(this.props.dataSplitter),r=-1!=this.selectedRows.indexOf(s);t.push("<tr class='nmdrTB_body_tr"+(r?"_sel":"")+"' id='"+this.id+"_nmdrTB_body_tr"+s+"' "),t.push("onClick=\"nmdr.core.$('"+this.id+"').selectRows(event, "+s+');">');for(var n=0;n<i.length;n++){0==n&&(t.push("<td class='nmdrTB_body_td nmdrTB_body_td_se'>"),t.push("<img class='nmdrTB_body_se' src='"+this.props.imagePath+"spCheckSel.png'></td>")),n+1==this.props.menuColumn&&(t.push("<td class='nmdrTB_body_td nmdrTB_body_td_cm'>"),t.push("<img class='nmdrTB_body_cm' src='"+this.props.imagePath+"spCMenu.gif' "),t.push("onClick=\"nmdr.core.$('"+this.id+"').openRowMenu(event, "+s+');"></td>'));var l=this.getColumnWidth(n),d=this.renderBodyCell(s-1,n,i[n],r),a=this.props.showRowCommands&&n==i.length-1?"<table width='100%' height='100%' border='0' cellpadding='0' cellspacing='0'><tr><td style='vertical-align: middle;'>"+(d||i[n])+"</td><td style='text-alignment: right;'><a class='nmdrTB_rowcontrol'><img src='"+this.props.imagePath+"spOpen.gif' title='open row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'openRow', "+s+");\">&nbsp;<img src='"+this.props.imagePath+"spEdit.gif' title='edit row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'editRow', "+s+");\">&nbsp;<img src='"+this.props.imagePath+"spDelete.gif' title='delete row' onclick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'deleteRow', "+s+');">&nbsp;</a></td></tr></table>':null;this.props.scrollable&&l&&n==i.length-1&&(l-=18),t.push("<td class='nmdrTB_body_td'"),t.push(l?" style='width:"+l+"px; min-width:"+l+"px; max-width:"+l+"px;'>":">"),t.push(a||(d||i[n]+"</td>"))}t.push("</tr>")}return t.push("</tbody>"),t.join("")},e.makeFooter=function(){if(!this.props.showFooter)return"";var t=[],e=this.columns.length+(-1==this.props.menuColumn?1:2);return t.push("<tfoot class='nmdrTB_footer'>"),t.push("<tr class='nmdrTB_footer_tr'>"),t.push("<td class='nmdrTB_footer_td' colspan="+e+">"),t.push("<div class='nmdrTB_footer_div'>"+this.renderFooter()+"</div>"),t.push("</td></tr></tfoot>"),t.join("")},e.renderFooter=function(){var t=[];if(t.push("<table width='100%' height='100%' border='0' cellpadding='4px' cellspacing='0'><tr>"),this.props.footerShowPager)if(this.dataRows.length>0){var e=this.firstRow>1?"<img src='"+this.props.imagePath+"spPrevend.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'firstPage');\"":"<img src='"+this.props.imagePath+"spPrevenddis.gif'",o=this.firstRow>1?"<img src='"+this.props.imagePath+"spPrev.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'prevPage');\"":"<img src='"+this.props.imagePath+"spPrevdis.gif'",s=this.lastRow<this.totalNumber?"<img src='"+this.props.imagePath+"spNext.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'nextPage');\"":"<img src='"+this.props.imagePath+"spNextdis.gif'",i=this.lastRow<this.totalNumber?"<img src='"+this.props.imagePath+"spNextend.gif' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'lastPage');\"":"<img src='"+this.props.imagePath+"spNextenddis.gif'";if(t.push("<td><table border='0' cellpadding='0' cellspacing='0'><tr>"),t.push("<td style='padding:0px 0px 0px 10px'>"+e+"'</td>"),t.push("<td style='padding:0px 0px 0px 10px'>"+o+"'</td>"),t.push("<td style='padding:0px 0px 0px 10px'>"+this.firstRow+"-"+this.lastRow+" / "+this.totalNumber+"</td>"),t.push("<td style='padding:0px 0px 0px 10px'>"+s+"'</td>"),t.push("<td style='padding:0px 0px 0px 10px'>"+i+"'</td>"),t.push("</tr></table>"),t.push("<td>"),t.push("<table border='0' cellpadding='0' cellspacing='0' style='margin-right:4px;margin-left:auto;'><tr><td></td>"),this.props.footerShowPageInfo&&t.push("<td style='padding:2px 0px 0px 0px;'><span>"+this.props.pageLable+" <b>"+this.pageNumber+"</b> "+this.props.ofLable+" <b>"+this.pageCount+"</b> / "+this.props.totalLable+" <b>"+this.totalNumber+"</b></span></td>"),this.props.footerShowGoPage){t.push("<td style='padding:2px 0px 0px 10px;'>"+this.props.gotoPageLable),t.push(" <select id='"+this.id+"_nmdrTB_goPageSelect' onchange=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'goToPage');\">"),t.push("<option value=''></option>");for(var r=1;r<=this.pageCount;r++)t.push("<option value='"+r+"'>"+r+"</option>");t.push("</select></td>")}this.props.footerShowRowCount&&(t.push("<td style='padding:2px 0px 0px 10px;'>"+this.props.rowCountLable),t.push(" <select id='"+this.id+"_nmdrTB_rowLimitSelect' onchange=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'setRowLimit');\">"),t.push("<option value='10' "+(10===this.props.rowLimit?"Selected":"")+">10</option>"),t.push("<option value='25' "+(25===this.props.rowLimit?"Selected":"")+">25</option>"),t.push("<option value='50' "+(50===this.props.rowLimit?"Selected":"")+">50</option>"),t.push("<option value='100' "+(100===this.props.rowLimit?"Selected":"")+">100</option>"),t.push("<option value='150' "+(150===this.props.rowLimit?"Selected":"")+">150</option>"),t.push("<option value='200' "+(200===this.props.rowLimit?"Selected":"")+">200</option>"),t.push("</select></td>")),t.push("</tr></table></td>")}else t.push("<td>This view contains no data.</td>");return t.push("</tr></table>"),t.join("")},e.configSize=function(){var t=this.getElementsByClassName("nmdrTB_table")[0];this.props.scrollable?this.style.width=t.offsetWidth+2+"px":t.style.width="100%"},e.updateTable=function(){this.getElementsByClassName("nmdrTB_content")[0].innerHTML=this.makeTable(),this.configSize()},e.loadData=function(t,e){var s=this;this.showLoader(!0),window.setTimeout(function(){var i=s.prepareData();s.columns=i.columns.slice(0),-1!==s.props.menuColumn&&(s.props.menuColumn=Math.max(s.props.menuColumn,1),s.props.menuColumn=Math.min(s.props.menuColumn,s.columns.length)),s.menuCommands=-1!==s.props.menuColumn?s.prepareMenuCommands():[],s.props.rowLimit=Math.min(s.props.rowLimit,i.rows.length),s.props.clientHandling?(o=s,s.originRows=i.rows.slice(0),s.dataRows=s.filterList(),s.dataRows.sort(s.sortComparator)):s.dataRows=i.rows.slice(0),t&&(s.pageNumber=1,s.totalNumber=s.dataRows.length,s.firstRow=1,s.lastRow=s.props.rowLimit>s.totalNumber?s.totalNumber:s.props.rowLimit,s.pageCount=Math.ceil(s.totalNumber/s.props.rowLimit)),e?s.makeView():s.updateTable(),s.showLoader(!1)},10)},e.selectRows=function(t,e,o){if(!o||this.props.multiSelection){if(this.deselect(),o){var s=this.selectedRows.length;if(this.clickedRow=-1,this.selectedRows=[],s!=this.props.rowLimit)for(n=this.firstRow;n<=this.lastRow;n++)this.selectedRows.push(n)}else{var i=this.selectedRows.indexOf(e);if(this.props.multiSelection){if(t&&t.ctrlKey)-1==i?this.selectedRows.push(e):(this.selectedRows.splice(i,1),e=-1);else if(t&&t.shiftKey){if(e<this.selectedRows[0])for(n=e;n<this.selectedRows[0];n++)this.selectedRows.push(n);else if(e>this.selectedRows[this.selectedRows.length-1])for(var r=this.selectedRows[this.selectedRows.length-1],n=e;n>r;n--)this.selectedRows.push(n)}else-1==i||this.selectedRows.length>1?(this.selectedRows=[],this.selectedRows[0]=e):(this.selectedRows=[],e=-1);this.selectedRows.sort(function(t,e){return t-e})}else-1==i?this.selectedRows[0]=e:(this.selectedRows=[],e=-1);this.clickedRow=e}this.select(),this.selectionChanged()}},e.select=function(){var t=this;this.selectedRows.forEach(function(e,o){var s=document.getElementById(t.id+"_nmdrTB_body_tr"+e),i=s.getElementsByClassName("nmdrTB_body_td_se")[0],r=s.getElementsByClassName("nmdrTB_body_se")[0],n=s.getElementsByClassName("nmdrTB_body_td_cm")[0],l=s.getElementsByClassName("nmdrTB_body_cm")[0];s.classList.remove("nmdrTB_body_tr"),s.classList.add("nmdrTB_body_tr_sel"),i.classList.add("nmdrTB_body_td_se_sel"),r.classList.add("nmdrTB_body_se_sel"),n&&(n.classList.add("nmdrTB_body_td_cm_sel"),l.classList.add("nmdrTB_body_cm_sel"))})},e.deselect=function(){var t=this;this.selectedRows.forEach(function(e,o){var s=document.getElementById(t.id+"_nmdrTB_body_tr"+e),i=s.getElementsByClassName("nmdrTB_body_td_se")[0],r=s.getElementsByClassName("nmdrTB_body_se")[0],n=s.getElementsByClassName("nmdrTB_body_td_cm")[0],l=s.getElementsByClassName("nmdrTB_body_cm")[0];s.classList.remove("nmdrTB_body_tr_sel"),s.classList.add("nmdrTB_body_tr"),i.classList.remove("nmdrTB_body_td_se_sel"),r.classList.remove("nmdrTB_body_se_sel"),n&&(n.classList.remove("nmdrTB_body_td_cm_sel"),l.classList.remove("nmdrTB_body_cm_sel"))})},e.clearSelection=function(){this.clickedRow=-1,this.selectedRows=[],this.selectionChanged()},e.selectionChanged=function(){var t=this.getSelection();this.handleEvents(t),this.handlePostBack(t)},e.getSelection=function(){for(var t=[],e=0;e<this.selectedRows.length;e++){var o=this.dataRows[this.selectedRows[e]-1].split(this.props.dataSplitter);t.push(o[0])}return t},e.selectColumn=function(t,e){},e.nextPage=function(){this.clearSelection(),this.pageNumber++,this.firstRow+=this.props.rowLimit,this.lastRow+=this.props.rowLimit,this.firstRow>this.totalNumber&&(this.firstRow=this.lastRow+1),this.lastRow>this.totalNumber&&(this.lastRow=this.totalNumber),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.prevPage=function(){this.pageNumber--,this.firstRow-=this.props.rowLimit,this.lastRow-=this.props.rowLimit,this.firstRow<1&&(this.firstRow=1),this.lastRow<this.firstRow+this.props.rowLimit&&(this.lastRow=this.firstRow+this.props.rowLimit-1),this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.firstPage=function(){this.pageNumber=1,this.firstRow=1,this.lastRow=this.props.rowLimit,this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.lastPage=function(){var t=this.totalNumber-(this.pageCount-1)*this.props.rowLimit;this.pageNumber=this.pageCount,this.firstRow=this.totalNumber-t,this.lastRow=this.totalNumber,this.clearSelection(),this.props.clientHandling?this.updateTable():this.loadData(!1,!1)},e.sortColumn=function(t){this.props.sortingColumn!=t&&(this.props.sortingDirection=null),this.props.sortingColumn=t,this.props.sortingDirection=null==this.props.sortingDirection?this.SORT_DESCENDING:this.props.sortingDirection==this.SORT_DESCENDING?this.SORT_ASCENDING:this.SORT_DESCENDING,this.clearSelection(),this.doSort()},e.sortAZ=function(){this.props.sortingColumn=this.selectedColumn,this.props.sortingDirection=this.SORT_DESCENDING,this.clearSelection(),this.doSort()},e.sortZA=function(){this.props.sortingColumn=this.selectedColumn,this.props.sortingDirection=this.SORT_ASCENDING,this.clearSelection(),this.doSort()},e.removeSorting=function(){this.props.sortingColumn=-1,this.props.sortingDirection=null,this.clearSelection(),this.doSort()},e.doSort=function(){if(!this.props.clientHandling)return this.loadData(!1,!1);this.showLoader(!0);var t=this;window.setTimeout(function(){-1===t.props.sortingColumn?t.dataRows=t.originRows.slice(0):(o=t,t.dataRows.sort(t.sortComparator)),t.showLoader(!1),t.updateTable()},10)},e.sortComparator=function(t,e){var s=o;if(null==t&&null==e)return 0;if(null!=t&&null==e)return s.props.sortingDirection==s.SORT_DESCENDING?1:-1;if(null==t&&null!=e)return s.props.sortingDirection==s.SORT_DESCENDING?-1:1;var i=t.split(s.props.dataSplitter),r=e.split(s.props.dataSplitter),n=i[s.props.sortingColumn],l=r[s.props.sortingColumn];return n==l?0:n>l?s.props.sortingDirection==s.SORT_DESCENDING?1:-1:s.props.sortingDirection==s.SORT_DESCENDING?-1:1},e.setFilter=function(){var t=document.getElementById(this.id+"_nmdrTB_filterSelect").value,e=document.getElementById(this.id+"_nmdrTB_filterText").value;e.length>0&&(this.props.filters[this.selectedColumn]=t+this.props.filterSplitter+e,this.clearSelection(),this.doFilter())},e.removeFilter=function(){delete this.props.filters[this.selectedColumn],this.clearSelection(),this.doFilter()},e.doFilter=function(){if(!this.props.clientHandling)return this.loadData(!0,!1);this.showLoader(!0);var t=this;window.setTimeout(function(){t.dataRows=t.filterList(),t.pageNumber=1,t.totalNumber=t.dataRows.length,t.firstRow=t.dataRows.length>0?1:0,t.lastRow=t.props.rowLimit<t.totalNumber?t.props.rowLimit:t.totalNumber,t.pageCount=Math.ceil(t.totalNumber/t.props.rowLimit),t.showLoader(!1),t.updateTable()},10)},e.filterList=function(){var t=[];if(Object.keys(this.props.filters).length>0)for(var e in this.originRows){var s=this.originRows[e],i=s.split(this.props.dataSplitter),r=!0;for(var n in i)if(this.props.filters[n]){var l=i[n],d=this.props.filters[n].split(this.props.filterSplitter);switch(d[0]){case"isequal":r&=l===d[1];break;case"isnotequal":r&=l!==d[1];break;case"contains":r&=-1!==l.indexOf(d[1]);break;case"notcontains":r&=-1==l.indexOf(d[1]);break;case"startswith":r&=0==l.indexOf(d[1]);break;case"endswith":r&=-1!==l.indexOf(d[1],l.length-d[1].length)}}r&&t.push(s)}else t=this.originRows.slice(0);return-1!==this.props.sortingColumn&&(o=this,t.sort(this.sortComparator)),t},e.setRowLimit=function(){var t=document.getElementById(this.id+"_nmdrTB_rowLimitSelect").value;this.props.rowLimit=parseInt(t),this.props.clientHandling?(this.pageNumber=1,this.firstRow=this.dataRows.length>0?1:0,this.lastRow=this.props.rowLimit<this.totalNumber?this.props.rowLimit:this.totalNumber,this.pageCount=Math.ceil(this.totalNumber/this.props.rowLimit),this.clearSelection(),this.updateTable()):this.loadData(!0,!1)},e.goToPage=function(){var t=document.getElementById(this.id+"_nmdrTB_goPageSelect").value;t.length&&(this.pageNumber=parseInt(t),this.props.clientHandling?(this.firstRow=(this.pageNumber-1)*this.props.rowLimit+1,this.lastRow=this.firstRow+this.props.rowLimit-1,this.lastRow>this.totalNumber&&(this.lastRow=this.totalNumber),this.clearSelection(),this.updateTable()):this.loadData(!1,!1))},e.openHeaderMenu=function(t,e){var o=this,s=e.id.substring(e.id.indexOf("_hdm")+4),i=document.getElementById(this.id+"_nmdrTB_header_th"+s),r=this.getElementsByClassName("nmdrTB_headerMenu")[0],n=this.absPosition,l=i.absPosition;nmdr.core.utils.stopPropagation(t),l.left+r.offsetWidth>n.left+this.offsetWidth&&(l.left=n.left+this.offsetWidth-r.offsetWidth),r.style.display="inline-block",r.style.position="absolute",r.style.left=l.left-n.left+"px",r.style.top=l.top-n.top+(this.props.headerHeight+8)+"px",nmdr.core.popup.open(r,e,function(){nmdr.core.animate.fadeIn(null,r,null,!0,function(){o.headerMenuOpen=!0})},function(t){o.closeHeaderMenu(null,o,t)}),document.getElementById(this.id+"_nmdrTB_filterColumnName").text=this.columns[s],this.selectedColumnOld=this.selectedColumn,this.selectedColumn=parseInt(s),document.getElementById(this.id+"_nmdrTB_filterSelect").innerHTML=this.makeFilterPattern(!1),document.getElementById(this.id+"_nmdrTB_filterText").value=this.makeFilterPattern(!0),-1!=this.selectedColumnOld&&(document.getElementById(this.id+"_nmdrTB_header_th"+this.selectedColumnOld).style.opacity=1)},e.closeHeaderMenu=function(t,e,o){null==e&&(e=this);var s=e.getElementsByClassName("nmdrTB_headerMenu")[0];nmdr.core.animate.fadeOut(null,s,null,!0,function(){s.style.display="none",document.getElementById(e.id+"_nmdrTB_header_th"+e.selectedColumn).style.opacity=1,e.headerMenuOpen=!1,e.handleCommand(null,t),e.selectedColumn=-1,e.selectedColumnOld=-1,o&&o()}),nmdr.core.popup.close()},e.openRowMenu=function(t,e){var o=this,s=document.getElementById(this.id+"_nmdrTB_body_tr"+e).getElementsByClassName("nmdrTB_body_cm")[0],i=this.getElementsByClassName("nmdrTB_rowMenu")[0],r=this.absPosition,n=s.absPosition;n.left+i.offsetWidth>r.left+this.offsetWidth&&(n.left=this.offsetWidth-i.offsetWidth),i.style.display="inline-block",i.style.position="absolute",i.style.left=n.left-r.left+"px",i.style.top=n.top-r.top+14+"px",nmdr.core.popup.open(i,s,function(){nmdr.core.animate.fadeIn(null,i,null,!0,function(){o.rowMenuOpen=!0})},function(t){o.closeRowMenu("clear",null,o,t)}),this.clickedRow==e&&nmdr.core.utils.stopPropagation(t)},e.closeRowMenu=function(t,e,o,s){null==o&&(o=this);var i=o.getElementsByClassName("nmdrTB_rowMenu")[0];nmdr.core.animate.fadeOut(null,i,null,!0,function(){i.style.display="none",o.updateRowMenuRow(!1),o.rowMenuOpen=!1,o.rowMenuActRow=-1,o.handleCommand(null,t),e&&e(),s&&s()}),nmdr.core.popup.close()},e.updateRowMenuRow=function(t){if(-1!=this.rowMenuActRow){var e=document.getElementById(this.id+"_nmdrTB_rowMenu_tr_"+this.rowMenuActRow);t?e.classList.add("rowMenuActRow"):e.classList.remove("rowMenuActRow")}},e.onRowMenuMouseOver=function(t){this.updateRowMenuRow(!1),this.rowMenuActRow},e.selectHeader=function(t,e){var o=document.getElementById(this.id+"_nmdrTB_header_th"+t);if(null==o);var s=document.getElementById(this.id+"_nmdrTB_hdm"+t);o.style.opacity=t==this.selectedColumn?.5:1,s&&(s.style.visibility=e?"visible":"hidden")},e.initKeyEvents=function(){var t=this;document.addEventListener("keydown",function(e){if(nmdr.core.utils.isActiveElement(t))if(40==e.keyCode){if(t.rowMenuOpen)-1!=t.rowMenuActRow?(t.updateRowMenuRow(!1),3==t.rowMenuActRow?t.rowMenuActRow=0:t.rowMenuActRow++):t.rowMenuActRow=0,t.updateRowMenuRow(!0);else{o=0==t.selectedRows.length?0:t.selectedRows[0];t.selectRows(null,o==t.lastRow?t.firstRow:o+1)}nmdr.core.utils.stopPropagation(e)}else if(38==e.keyCode){if(t.rowMenuOpen)-1!=t.rowMenuActRow?(t.updateRowMenuRow(!1),0==t.rowMenuActRow?t.rowMenuActRow=3:t.rowMenuActRow--):t.rowMenuActRow=0,t.updateRowMenuRow(!0);else{var o=0==t.selectedRows.length?0:t.selectedRows[0];t.selectRows(null,o==t.firstRow?t.lastRow:o-1)}nmdr.core.utils.stopPropagation(e)}else 13==e.keyCode&&(t.rowMenuOpen?t.executeMenuCommand(t.rowMenuActRow):-1!=t.props.menuColumn&&t.openRowMenu(e,t.selectedRows[0]),nmdr.core.utils.stopPropagation(e))})},e.showLoader=function(t){var e=this.getElementsByClassName("nmdrTB_loader")[0];e&&(e.style.display=t?"inline":"none",e.style.cursor=t?"wait":"default")},e.handleCommand=function(t,e,o){if(this.headerMenuOpen)this.closeHeaderMenu(e);else if(this.rowMenuOpen)this.closeRowMenu(e);else switch(t&&nmdr.core.utils.stopPropagation(t),o&&this.selectRows(t,o),e){case"selectAll":this.selectRows(null,null,!0);break;case"nextPage":this.nextPage();break;case"prevPage":this.prevPage();break;case"firstPage":this.firstPage();break;case"lastPage":this.lastPage();break;case"sortAZ":this.sortAZ();break;case"sortZA":this.sortZA();break;case"removeSorting":this.removeSorting();break;case"setFilter":this.setFilter();break;case"removeFilter":this.removeFilter();break;case"setRowLimit":this.setRowLimit();break;case"goToPage":this.goToPage();break;case"openRow":this.openRow(o);break;case"editRow":this.editRow(o);break;case"deleteRow":this.deleteRow(o)}},e.executeMenuCommand=function(t){this.closeRowMenu("clear",this.menuCommands[t].action)},e.handlePostBack=function(t){this.props.doPostBack},e.makeFilterPattern=function(t){if(t)return this.props.filters[this.selectedColumn]?this.props.filters[this.selectedColumn].split(this.props.filterSplitter)[1]:"";var e="",o=this.props.filters[this.selectedColumn]?this.props.filters[this.selectedColumn].split(this.props.filterSplitter)[0]:"";for(var s in this.props.patternNames){var i=this.props.patternNames[s].split("/");switch(i[0]){case"is equal":e+="<option value='isequal' "+("isequal"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>";break;case"is not equal":e+="<option value='isnotequal' "+("isnotequal"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>";break;case"contains":e+="<option value='contains' "+("contains"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>";break;case"not contains":e+="<option value='notcontains' "+("notcontains"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>";break;case"starts with":e+="<option value='startswith' "+("startswith"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>";break;case"ends with":e+="<option value='endswith' "+("endswith"==o?"selected":"")+">"+("x"==i[1]?i[0]:i[1])+"</option>"}}return e},e.makeRowMenu=function(){if(-1===this.props.menuColumn)return"";var t=[];t.push("<div class='nmdrTB_rowMenu' id='"+this.id+"_nmdrTB_rowMenu'>"),t.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%'>");for(var e=0;e<this.menuCommands.length;e++){var o=this.menuCommands[e];t.push("<tr class='nmdrTB_rowMenu_tr' id='"+this.id+"_nmdrTB_rowMenu_tr_"+e+"' "),t.push("onclick=\"nmdr.core.$('"+this.id+"').executeMenuCommand("+e+');" '),t.push("onmouseover=\"nmdr.core.$('"+this.id+"').onRowMenuMouseOver(event);\">"),t.push("<td style='width:24px'><img src='"+this.props.imagePath+o.icon+"'></td>"),t.push("<td><span>"+o.name+"</span></td>"),t.push("</tr>")}return t.push("</table></div>"),t.join("")},e.makeHeaderMenu=function(){var t=[];return t.push("<div class='nmdrTB_headerMenu'>"),t.push("<table cellpadding='0' cellspacing='0' border='0' width='100%' height='100%'>"),t.push("<tr>"),t.push("<td>"),t.push("<a href='#'><img src='"+this.props.imagePath+"spDoSortAZ.gif' style='border-style:none;'/></a>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'sortAZ');\" style='text-decoration:none;'>A-Z</a>"),t.push("</td>"),t.push("<td>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event);\">"),t.push("<img src='"+this.props.imagePath+"spClosePopup.gif' style='border-style:none; vertical-align:middle;float:right;'/>"),t.push("</a>"),t.push("</td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td colspan='2'>"),t.push("<a href='#'><img src='"+this.props.imagePath+"spDoSortZA.gif' style='border-style:none;'/></a>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'sortZA');\" style='text-decoration:none;'>Z-A</a>"),t.push("</td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td colspan='2' style='border-bottom:dotted; border-bottom-width:1px;'></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td colspan='2'>"),t.push("<a href='#'><img src='"+this.props.imagePath+"spFilterdel.gif' style='border-style:none;'/></a>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'removeFilter');\" style='text-decoration:none;'>"+this.props.removeFilterLable+"&nbsp;&nbsp;</a>"),t.push("<a href='#'><img src='"+this.props.imagePath+"spSortdel.gif' style='border-style:none;'/></a>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'removeSorting');\" style='text-decoration:none;'>"+this.props.removeSortingLable+"</a>"),t.push("</td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td colspan='2'>"),t.push("<table>"),t.push("<tr>"),t.push("<td>"),t.push("<span id='"+this.id+"_nmdrTB_filterColumnName'>Column</span>"),t.push("</td>"),t.push("<td>"),t.push("<select id='"+this.id+"_nmdrTB_filterSelect'>"+this.makeFilterPattern(!1)+"</select>"),t.push("</td>"),t.push("<td>"),t.push("<input id='"+this.id+"_nmdrTB_filterText' type='text' name='columnfilter' size='10' value='"+this.makeFilterPattern(!0)+"'/>"),t.push("</td>"),t.push("<td>"),t.push("<a href='' onClick=\"nmdr.core.$('"+this.id+"').handleCommand(event, 'setFilter');\">"),t.push("<img src='"+this.props.imagePath+"spFilterset.gif' style='border-style:none; vertical-align:middle;'/>"),t.push("</a>"),t.push("</td>"),t.push("</tr>"),t.push("</table>"),t.push("</td>"),t.push("</tr>"),t.push("</table>"),t.push("</div>"),t.join("")},e.prepareMenuCommands=function(){return[{name:"open item",icon:"details.gif",action:function(){alert("open item")}},{name:"edit item",icon:"editdetails.gif",action:function(){alert("edit item")}},{name:"delete item",icon:"delete.gif",action:function(){alert("delete item")}},{name:"rename item",icon:"edititem.gif",action:function(){alert("rename item")}}]},e.prepareData=function(){for(var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e=this.props.dataSplitter,o=[],s=[],i=0;i<this.props.dummyRows;i++){for(var r="",n=0;n<this.props.dummyCols;n++)n<t.length&&(0==i&&o.push(t[n]),r+=t[n]+i,n<this.props.dummyCols-1&&(r+=e));s.push(r)}return{columns:o,rows:s}},e}}